<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>知行合一</title>
  <subtitle>学之不勤，必其志之尚未笃</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://n.jourk.com/"/>
  <updated>2016-04-25T03:59:55.235Z</updated>
  <id>http://n.jourk.com/</id>
  
  <author>
    <name>Jourk</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Hello World</title>
    <link href="http://n.jourk.com/hello-world/"/>
    <id>http://n.jourk.com/hello-world/</id>
    <published>2016-04-10T14:13:12.282Z</published>
    <updated>2016-04-25T03:59:55.235Z</updated>
    
    <content type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;documentation&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a href=&quot;https://hexo.io/docs/troubleshooting.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;troubleshooting&lt;/a&gt; or you can ask me on &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;Quick-Start&quot;&gt;&lt;a href=&quot;#Quick-Start&quot; class=&quot;headerlink&quot; title=&quot;Quick Start&quot;&gt;&lt;/a&gt;Quick Start&lt;/h2&gt;&lt;h3 id=&quot;Create-a-new-post&quot;&gt;&lt;a href=&quot;#Create-a-new-post&quot; class=&quot;headerlink&quot; title=&quot;Create a new post&quot;&gt;&lt;/a&gt;Create a new post&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo new &lt;span class=&quot;string&quot;&gt;&quot;My New Post&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/writing.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Writing&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Run-server&quot;&gt;&lt;a href=&quot;#Run-server&quot; class=&quot;headerlink&quot; title=&quot;Run server&quot;&gt;&lt;/a&gt;Run server&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo server&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/server.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Server&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Generate-static-files&quot;&gt;&lt;a href=&quot;#Generate-static-files&quot; class=&quot;headerlink&quot; title=&quot;Generate static files&quot;&gt;&lt;/a&gt;Generate static files&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo generate&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/generating.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Generating&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Deploy-to-remote-sites&quot;&gt;&lt;a href=&quot;#Deploy-to-remote-sites&quot; class=&quot;headerlink&quot; title=&quot;Deploy to remote sites&quot;&gt;&lt;/a&gt;Deploy to remote sites&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo deploy&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/deployment.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Deployment&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Docker-搭建Discourse并整合到LNMP中</title>
    <link href="http://n.jourk.com/Notes/Docker/Docker-%E6%90%AD%E5%BB%BADiscourse%E5%B9%B6%E6%95%B4%E5%90%88%E5%88%B0LNMP%E4%B8%AD/"/>
    <id>http://n.jourk.com/Notes/Docker/Docker-搭建Discourse并整合到LNMP中/</id>
    <published>2015-12-10T03:27:06.000Z</published>
    <updated>2016-04-25T01:39:24.576Z</updated>
    
    <content type="html">&lt;h2 id=&quot;准备工作&quot;&gt;&lt;a href=&quot;#准备工作&quot; class=&quot;headerlink&quot; title=&quot;准备工作&quot;&gt;&lt;/a&gt;准备工作&lt;/h2&gt;&lt;p&gt;本人使用的是Hostus,10美元/年,洛杉矶节点。 &lt;/p&gt;
&lt;p&gt;购买地址：&lt;a href=&quot;https://my.hostus.us/aff.php?aff=822&amp;amp;pid=103&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hostus&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;默认系统为：Centos 6 64bit&lt;/p&gt;
&lt;h2 id=&quot;创建Swap分区&quot;&gt;&lt;a href=&quot;#创建Swap分区&quot; class=&quot;headerlink&quot; title=&quot;创建Swap分区&quot;&gt;&lt;/a&gt;创建Swap分区&lt;/h2&gt;&lt;p&gt;使用&lt;code&gt;dd&lt;/code&gt;命令创建一个&lt;code&gt;swap分区&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;dd if=/dev/zero of=/home/swap bs=1024 count=1048576&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;count的计算公式： &lt;code&gt;count=SIZE*1024 (size以MB为单位）&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;这样就建立一个&lt;code&gt;/home/swap&lt;/code&gt;的分区文件，大小为1G，接着需要格式化新建的SWAP分区：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mkswap /home/swap&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;再用&lt;code&gt;swapon&lt;/code&gt;命令把这个文件分区变成swap分区&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;swapon /home/swap&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;（关闭SWAP分区命令为：&lt;code&gt;swapoff /home/swap&lt;/code&gt;）&lt;/p&gt;
&lt;p&gt;再用&lt;code&gt;free -m&lt;/code&gt;查看一下，可以看出swap扩大了。&lt;/p&gt;
&lt;p&gt;为了能够让swap自动挂载，要修改&lt;code&gt;/etc/fstab&lt;/code&gt;文件&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vi /etc/fstab&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在文件末尾加上&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;/home/swap swap swap default 0 0&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;这样就算重启系统，swap分区就不用手动挂载了。&lt;/p&gt;
&lt;h2 id=&quot;安装Docker&quot;&gt;&lt;a href=&quot;#安装Docker&quot; class=&quot;headerlink&quot; title=&quot;安装Docker&quot;&gt;&lt;/a&gt;安装Docker&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;yum install docker&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo service docker start&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo chkconfig docker on&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;安装Discourse&quot;&gt;&lt;a href=&quot;#安装Discourse&quot; class=&quot;headerlink&quot; title=&quot;安装Discourse&quot;&gt;&lt;/a&gt;安装Discourse&lt;/h2&gt;&lt;p&gt;创建 &lt;code&gt;/var/discourse&lt;/code&gt; 文件夹，克隆官方 Discourse Docker 镜像至其中，然后在拷贝一个配置文件，并命名为 &lt;code&gt;app.yml&lt;/code&gt;:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mkdir /var/discourse&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;git clone https://github.com/discourse/discourse_docker.git /var/discourse&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cd /var/discourse&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cp samples/standalone.yml containers/app.yml&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;初始化：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;./launcher bootstrap app&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;进入容器&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;./launcher enter app&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;输入：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;rails console&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;SiteSetting.notification_email = &amp;apos;admin@jourk.com&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;在容器外安装-nginx&quot;&gt;&lt;a href=&quot;#在容器外安装-nginx&quot; class=&quot;headerlink&quot; title=&quot;在容器外安装 nginx&quot;&gt;&lt;/a&gt;在容器外安装 nginx&lt;/h2&gt;&lt;p&gt;首先，确定容器没有工作：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cd /var/discourse&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;./launcher stop app&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;改变你的 &lt;code&gt;app.yml&lt;/code&gt;，像这样：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- &amp;quot;templates/web.socketed.template.yml&amp;quot; # &amp;lt;-- 增加了&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;expose:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- &amp;quot;2222:22&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;修改nginx配置文件&lt;br&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;server &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;listen 80;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# change this&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;server_name forum.riking.org;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;location / &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   proxy_pass http://unix:/var/discourse/shared/standalone/nginx.http.sock:;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   proxy_set_header Host $http_host;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   proxy_http_version 1.1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;问题归总&quot;&gt;&lt;a href=&quot;#问题归总&quot; class=&quot;headerlink&quot; title=&quot;问题归总&quot;&gt;&lt;/a&gt;问题归总&lt;/h2&gt;&lt;p&gt;问题1：mysql 启动错误-server PID file could not be found&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# service mysqld stop&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;MySQL manager or server PID file could not be found! [FAILED]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;解决办法：&lt;/p&gt;
&lt;p&gt;首先查看一下进程&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# ps aux |grep mysq*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;root 10274 0.0 0.0 68160 1336 ? S 13:43 0:00 /bin/sh /usr/bin/mysqld_safe --datadir=/var/lib/mysql --pid-file=/var/lib/mysql/irxpert-test.pid&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mysql 10353 0.0 1.0 344360 39464 ? Sl 13:43 0:00 /usr/sbin/mysqld --basedir=/usr --datadir=/var/lib/mysql --plugin-dir=/usr/lib64/mysql/plugin --user=mysql --log-error=/var/lib/mysql/irxpert-test.err --pid-file=/var/lib/mysql/irxpert-test.pid&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;root 11884 0.0 0.0 63384 760 pts/1 S+ 15:44 0:00 grep mysq*&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;如果看到上面的内容，那说明，Mysql的进程卡死了，这时用就要把这些卡死的进程都关闭&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# kill 10274&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# kill 10353&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;启动Mysql就ok了&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# service mysql start&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Starting MySQL. [ OK ]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;准备工作&quot;&gt;&lt;a href=&quot;#准备工作&quot; class=&quot;headerlink&quot; title=&quot;准备工作&quot;&gt;&lt;/a&gt;准备工作&lt;/h2&gt;&lt;p&gt;本人使用的是Hostus,10美元/年,洛杉矶节点。 &lt;/p&gt;
&lt;p&gt;购买地址：&lt;a href=&quot;https://my.ho
    
    </summary>
    
      <category term="Notes" scheme="http://n.jourk.com/categories/Notes/"/>
    
    
      <category term="docker" scheme="http://n.jourk.com/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>Mysql-Win10_64位下如何安装配置mysql</title>
    <link href="http://n.jourk.com/Notes/Mysql/Mysql-Win10_64%E4%BD%8D%E4%B8%8B%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AEmysql/"/>
    <id>http://n.jourk.com/Notes/Mysql/Mysql-Win10_64位下如何安装配置mysql/</id>
    <published>2015-11-06T03:27:06.000Z</published>
    <updated>2016-04-16T14:48:15.118Z</updated>
    
    <content type="html">&lt;h2 id=&quot;Mysql-zip下载&quot;&gt;&lt;a href=&quot;#Mysql-zip下载&quot; class=&quot;headerlink&quot; title=&quot;Mysql.zip下载&quot;&gt;&lt;/a&gt;Mysql.zip下载&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://www.mysql.com/downloads/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;官方下载&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;解压到D-Mysql&quot;&gt;&lt;a href=&quot;#解压到D-Mysql&quot; class=&quot;headerlink&quot; title=&quot;解压到D:\Mysql&quot;&gt;&lt;/a&gt;解压到D:\Mysql&lt;/h2&gt;&lt;h2 id=&quot;在D-Mysql下新建my-ini配置文件&quot;&gt;&lt;a href=&quot;#在D-Mysql下新建my-ini配置文件&quot; class=&quot;headerlink&quot; title=&quot;在D:\Mysql下新建my.ini配置文件&quot;&gt;&lt;/a&gt;在D:\Mysql下新建my.ini配置文件&lt;/h2&gt;&lt;p&gt;内容如下：&lt;br&gt;&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt; [mysql]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; # 设置mysql客户端默认字符集&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;default-character-set=utf8 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; [mysqld]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; #设置3306端口&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;port = 3306 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; # 设置mysql的安装目录&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;basedir=D:/MySQL&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; # 设置mysql数据库的数据的存放目录&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;datadir=D:/MySQL/data/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; # 允许最大连接数&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;max_connections=200&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; # 服务端使用的字符集默认为8比特编码的latin1字符集&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;character-set-server=utf8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; # 创建新表时将使用的默认存储引擎&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;default-storage-engine=INNODB &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;重点是以下配置，其中datadir的目录名称必须是：&lt;code&gt;D:\Mysqldata&lt;/code&gt;。&lt;/p&gt;
&lt;h2 id=&quot;修改环境变量&quot;&gt;&lt;a href=&quot;#修改环境变量&quot; class=&quot;headerlink&quot; title=&quot;修改环境变量&quot;&gt;&lt;/a&gt;修改环境变量&lt;/h2&gt;&lt;p&gt;在windows系统环境变量path，加入如下内容&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;D:\Mysql\bin;（注意加分号）&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;将mysql注册为windows系统服务&quot;&gt;&lt;a href=&quot;#将mysql注册为windows系统服务&quot; class=&quot;headerlink&quot; title=&quot;将mysql注册为windows系统服务&quot;&gt;&lt;/a&gt;将mysql注册为windows系统服务&lt;/h2&gt;&lt;p&gt;具体操作是在命令行中执行以下命令（需要以管理员身份运行命令行）：&lt;/p&gt;
&lt;p&gt;需要切换到bin目录，否则，会将服务目录指定为C:\Program Files\MySQL\MySQL Server 5.7\mysqld&lt;/p&gt;
&lt;p&gt;增加服务命令：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mysqld install MySQL --defaults-file=&amp;quot;D:\MySQLmy.ini&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;移除服务命令为：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mysqld remove&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;第5步成功后，打开系统服务管理&quot;&gt;&lt;a href=&quot;#第5步成功后，打开系统服务管理&quot; class=&quot;headerlink&quot; title=&quot;第5步成功后，打开系统服务管理&quot;&gt;&lt;/a&gt;第5步成功后，打开系统服务管理&lt;/h2&gt;&lt;p&gt;可以看到mysql系统服务&lt;/p&gt;
&lt;p&gt;使用 &lt;code&gt;mysqld –console&lt;/code&gt; 启动&lt;/p&gt;
&lt;p&gt;可以显示出启动错误信息&lt;/p&gt;
&lt;p&gt;在命令行启动mysql命令为：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;net start mysql&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;关闭mysql命令为：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;net stop mysql&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;修改root的密码为jourk123&quot;&gt;&lt;a href=&quot;#修改root的密码为jourk123&quot; class=&quot;headerlink&quot; title=&quot;修改root的密码为jourk123&quot;&gt;&lt;/a&gt;修改root的密码为&lt;code&gt;jourk123&lt;/code&gt;&lt;/h2&gt;&lt;p&gt;命令行执行：&lt;code&gt;mysql –uroot&lt;/code&gt;&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mysql&amp;gt; show databases;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mysql&amp;gt; use mysql;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mysql&amp;gt; UPDATE user SET password=PASSWORD(&amp;apos;jourk123&amp;apos;) WHERE user=&amp;apos;root&amp;apos;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mysql&amp;gt; FLUSH PRIVILEGES;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mysql&amp;gt; QUIT&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;远程登陆配置&quot;&gt;&lt;a href=&quot;#远程登陆配置&quot; class=&quot;headerlink&quot; title=&quot;远程登陆配置&quot;&gt;&lt;/a&gt;远程登陆配置&lt;/h2&gt;&lt;p&gt;允许root用户在任何地方进行远程登录，并具有所有库任何操作权限，具体操作如下：&lt;/p&gt;
&lt;p&gt;1）在本机先使用root用户登录mysql：&lt;/p&gt;
&lt;p&gt;命令行执行：&lt;code&gt;mysql -u root -p&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;输入密码（第7步中设置的密码）：&lt;code&gt;jourk123&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;2）进行授权操作：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mysql&amp;gt; GRANT ALL PRIVILEGES ON *.* TO &amp;apos;root&amp;apos;@&amp;apos;%&amp;apos; IDENTIFIED BY &amp;apos;youpassword&amp;apos; WITH GRANT OPTION;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;重载授权表：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mysql&amp;gt; FLUSH PRIVILEGES;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;退出&lt;code&gt;mysql：quit&lt;/code&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Mysql-zip下载&quot;&gt;&lt;a href=&quot;#Mysql-zip下载&quot; class=&quot;headerlink&quot; title=&quot;Mysql.zip下载&quot;&gt;&lt;/a&gt;Mysql.zip下载&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://www.mysql.com/down
    
    </summary>
    
      <category term="Notes" scheme="http://n.jourk.com/categories/Notes/"/>
    
    
      <category term="mysql" scheme="http://n.jourk.com/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>Docker-学习记录-搭建</title>
    <link href="http://n.jourk.com/Notes/Docker/Docker-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95-%E6%90%AD%E5%BB%BA/"/>
    <id>http://n.jourk.com/Notes/Docker/Docker-学习记录-搭建/</id>
    <published>2015-10-29T03:27:06.000Z</published>
    <updated>2016-04-16T16:49:35.784Z</updated>
    
    <content type="html">&lt;h2 id=&quot;一、环境&quot;&gt;&lt;a href=&quot;#一、环境&quot; class=&quot;headerlink&quot; title=&quot;一、环境:&quot;&gt;&lt;/a&gt;一、环境:&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;服务器:DigitalOcean &lt;a href=&quot;https://www.digitalocean.com/?refcode=edccd86e640b&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;点击申请&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;操作系统:CentOS 7&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;二、安装前准备工作&quot;&gt;&lt;a href=&quot;#二、安装前准备工作&quot; class=&quot;headerlink&quot; title=&quot;二、安装前准备工作&quot;&gt;&lt;/a&gt;二、安装前准备工作&lt;/h2&gt;&lt;p&gt;Docker必须安装在64-bit操作系统上，CentOS 7的内核版本不低于&lt;code&gt;3.10&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;使用&lt;code&gt;uname –r&lt;/code&gt;检查内核版本:&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ uname –r&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;3.10.0-229.el7.x86_64&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&quot;三、安装&quot;&gt;&lt;a href=&quot;#三、安装&quot; class=&quot;headerlink&quot; title=&quot;三、安装&quot;&gt;&lt;/a&gt;三、安装&lt;/h2&gt;&lt;p&gt;有两种方式安装Docker。你可以使用yum或者可以使用curl从get.docker.com网站下载。&lt;/p&gt;
&lt;h3 id=&quot;通过yum安装&quot;&gt;&lt;a href=&quot;#通过yum安装&quot; class=&quot;headerlink&quot; title=&quot;通过yum安装&quot;&gt;&lt;/a&gt;通过yum安装&lt;/h3&gt;&lt;p&gt;1、使用root用户登录&lt;/p&gt;
&lt;p&gt;2、确保系统使用最新的软件包&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sudo yum update&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;3、添加yum repo&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ cat &amp;gt;/etc/yum.repos.d/docker.repo &amp;lt;&amp;lt;-EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dockerrepo]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;name=Docker Repository&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;baseurl=https://yum.dockerproject.org/repo/main/centos/7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;enabled=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gpgcheck=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gpgkey=https://yum.dockerproject.org/gpg&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;EOF&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;4、安装Docker包&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sudo yum install docker-engine&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;5、打开Docker进程&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sudo service docker start&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;6、运行测试确保docker安装完成&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sudo docker run hello-world&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Unable to find image &amp;apos;hello-world:latest&amp;apos; locally&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;latest: Pulling from hello-world&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a8219747be10: Pull complete&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91c95931e552: Already exists&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hello-world:latest: The image you are pulling has been verified. Important: image verification is a tech preview feature and should not be relied on to provide security.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Digest: sha256:aa03e5d0d5553b4c3473e89c8619cf79df368babd1.7.1cf5daeb82aab55838d&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status: Downloaded newer image for hello-world:latest&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Hello from Docker.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;This message shows that your installation appears to be working correctly.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;To generate this message, Docker took the following steps:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1. The Docker client contacted the Docker daemon.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2. The Docker daemon pulled the &amp;quot;hello-world&amp;quot; image from the Docker Hub.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(Assuming it was not already locally available.)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3. The Docker daemon created a new container from that image which runs the&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;executable that produces the output you are currently reading.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4. The Docker daemon streamed that output to the Docker client, which sent it&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;to your terminal.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;To try something more ambitious, you can run an Ubuntu container with:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ docker run -it ubuntu bash&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;For more examples and ideas, visit:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;http://docs.docker.com/userguide/&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;使用脚本安装&quot;&gt;&lt;a href=&quot;#使用脚本安装&quot; class=&quot;headerlink&quot; title=&quot;使用脚本安装&quot;&gt;&lt;/a&gt;使用脚本安装&lt;/h3&gt;&lt;p&gt;1、用root用户登录&lt;/p&gt;
&lt;p&gt;2、确保系统使用最新的软件包&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sudo yum update&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;3、运行Docker安装脚本&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ curl &lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt;SL https://get.docker.com/ | sh&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这个脚本将添加 docker.repo 并安装Docker。&lt;/p&gt;
&lt;p&gt;4、开启Docker进程&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sudo service docker start&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;5、运行测试确保docker安装完成&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sudo docker run hello-world&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;四、创建一个docker-group&quot;&gt;&lt;a href=&quot;#四、创建一个docker-group&quot; class=&quot;headerlink&quot; title=&quot;四、创建一个docker group&quot;&gt;&lt;/a&gt;四、创建一个docker group&lt;/h2&gt;&lt;p&gt;为了避免每次都要输入sudo命令，可以使用docker创建一个用户组docker，并添加用户。当docker进程启动，docker用户组的成员将对docker拥有读写权限。&lt;/p&gt;
&lt;p&gt;创建docker组并添加用户&lt;/p&gt;
&lt;p&gt;1、使用一个具有sudo权限的用户登录centos&lt;/p&gt;
&lt;p&gt;2、创建docker组并添加用户&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sudo usermod &lt;span class=&quot;_&quot;&gt;-a&lt;/span&gt;G docker your_username&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;3、注销之后登录&lt;/p&gt;
&lt;p&gt;4、验证运行docker而不使用sudo&lt;/p&gt;
&lt;p&gt;5、开机启动docker进程&lt;/p&gt;
&lt;p&gt;启动计算机时即启动docker&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sudo chkconfig docker on&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;五、卸载&quot;&gt;&lt;a href=&quot;#五、卸载&quot; class=&quot;headerlink&quot; title=&quot;五、卸载&quot;&gt;&lt;/a&gt;五、卸载&lt;/h2&gt;&lt;p&gt;可以使用yum卸载docker软件&lt;/p&gt;
&lt;p&gt;1、列出所有安装的包&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ yum list installed | grep docker&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;docker-engine.x86_64 1.7.1-1.el7 @/docker-engine-1.7.1-1.el7.x86_64.rpm&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;2、移除包&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sudo yum -y remove docker-engine.x86_64&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这个命令不会移除主机上的镜像、容器、卷和用户创建的配置文件。&lt;/p&gt;
&lt;p&gt;3、删除主机上的镜像、容器、卷&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ rm -rf /var/lib/docker&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;4、找到并删除用户创建的配置文件&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;一、环境&quot;&gt;&lt;a href=&quot;#一、环境&quot; class=&quot;headerlink&quot; title=&quot;一、环境:&quot;&gt;&lt;/a&gt;一、环境:&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;服务器:DigitalOcean &lt;a href=&quot;https://www.digitalocean.com
    
    </summary>
    
      <category term="Notes" scheme="http://n.jourk.com/categories/Notes/"/>
    
    
      <category term="mysql" scheme="http://n.jourk.com/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>VPN-CentOS下shadowsocks-libev一键安装脚本</title>
    <link href="http://n.jourk.com/System/vpn/VPN-CentOS%E4%B8%8Bshadowsocks-libev%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC/"/>
    <id>http://n.jourk.com/System/vpn/VPN-CentOS下shadowsocks-libev一键安装脚本/</id>
    <published>2015-10-15T03:27:06.000Z</published>
    <updated>2016-04-22T07:20:19.804Z</updated>
    
    <content type="html">&lt;h2 id=&quot;本脚本适用环境&quot;&gt;&lt;a href=&quot;#本脚本适用环境&quot; class=&quot;headerlink&quot; title=&quot;本脚本适用环境&quot;&gt;&lt;/a&gt;本脚本适用环境&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;系统支持：CentOS 32或64位&lt;br&gt;内存要求：≥128M&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;关于本脚本&quot;&gt;&lt;a href=&quot;#关于本脚本&quot; class=&quot;headerlink&quot; title=&quot;关于本脚本&quot;&gt;&lt;/a&gt;关于本脚本&lt;/h2&gt;&lt;p&gt;一键安装 libev 版的 shadowsocks 最新版本。该版本的特点是&lt;code&gt;内存占用小（600k左右）&lt;/code&gt;，&lt;code&gt;低 CPU 消耗&lt;/code&gt;，甚至可以安装在基于 OpenWRT 的路由器上。&lt;/p&gt;
&lt;h2 id=&quot;默认配置&quot;&gt;&lt;a href=&quot;#默认配置&quot; class=&quot;headerlink&quot; title=&quot;默认配置&quot;&gt;&lt;/a&gt;默认配置&lt;/h2&gt;&lt;p&gt;服务器端口：&lt;code&gt;自己设定（如不设定，默认为 8989）&lt;/code&gt;&lt;br&gt;客户端端口：&lt;code&gt;1080&lt;/code&gt;&lt;br&gt;密码：&lt;code&gt;自己设定（如不设定，默认为teddysun.com）&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&quot;客户端下载&quot;&gt;&lt;a href=&quot;#客户端下载&quot; class=&quot;headerlink&quot; title=&quot;客户端下载&quot;&gt;&lt;/a&gt;客户端下载&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://sourceforge.net/projects/shadowsocksgui/files/dist/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://sourceforge.net/projects/shadowsocksgui/files/dist/&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;使用方法&quot;&gt;&lt;a href=&quot;#使用方法&quot; class=&quot;headerlink&quot; title=&quot;使用方法&quot;&gt;&lt;/a&gt;使用方法&lt;/h2&gt;&lt;p&gt;使用&lt;code&gt;root&lt;/code&gt;用户登录，运行以下命令：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;wget --no-check-certificate https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks-libev.sh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;chmod +x shadowsocks-libev.sh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./shadowsocks-libev.sh 2&amp;gt;&amp;amp;1 | tee shadowsocks-libev.log&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;安装完成后，脚本提示如下：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Congratulations, shadowsocks-libev install completed!&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Your Server IP:your_server_ip&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Your Server Port:your_server_port&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Your Password:your_password&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Your Local IP:127.0.0.1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Your Local Port:1080&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Your Encryption Method:aes-256-cfb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Welcome to visit:http://teddysun.com/357.html&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Enjoy it!&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;卸载方法&quot;&gt;&lt;a href=&quot;#卸载方法&quot; class=&quot;headerlink&quot; title=&quot;卸载方法&quot;&gt;&lt;/a&gt;卸载方法&lt;/h2&gt;&lt;p&gt;使用 root 用户登录，运行以下命令：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;./shadowsocks-libev.sh uninstall&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;安装完成后即已后台启动 shadowsocks ，运行：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ps -ef | grep ss-server | grep -v ps | grep -v grep&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;可以查看进程是否存在。&lt;/p&gt;
&lt;p&gt;本脚本安装完成后，会将 shadowsocks-libev 加入开机自启动。&lt;/p&gt;
&lt;h2 id=&quot;使用命令&quot;&gt;&lt;a href=&quot;#使用命令&quot; class=&quot;headerlink&quot; title=&quot;使用命令&quot;&gt;&lt;/a&gt;使用命令&lt;/h2&gt;&lt;p&gt;启动：&lt;code&gt;/etc/init.d/shadowsocks start&lt;/code&gt;&lt;br&gt;停止：&lt;code&gt;/etc/init.d/shadowsocks stop&lt;/code&gt;&lt;br&gt;重启：&lt;code&gt;/etc/init.d/shadowsocks restart&lt;/code&gt;&lt;br&gt;查看状态：&lt;code&gt;/etc/init.d/shadowsocks status&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&quot;特别说明&quot;&gt;&lt;a href=&quot;#特别说明&quot; class=&quot;headerlink&quot; title=&quot;特别说明&quot;&gt;&lt;/a&gt;特别说明&lt;/h2&gt;&lt;p&gt;1、已安装旧版本的 shadowsocks 需要升级的话，需下载本脚本的最新版，运行卸载命令&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;./shadowsocks-libev.sh uninstall&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后，再次执行本脚本即可安装最新版。&lt;/p&gt;
&lt;h2 id=&quot;参考链接&quot;&gt;&lt;a href=&quot;#参考链接&quot; class=&quot;headerlink&quot; title=&quot;参考链接&quot;&gt;&lt;/a&gt;参考链接&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/madeye/shadowsocks-libev&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/madeye/shadowsocks-libev&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;原文链接：&lt;a href=&quot;https://teddysun.com/357.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Shadowsocks-go一键安装脚本&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;本脚本适用环境&quot;&gt;&lt;a href=&quot;#本脚本适用环境&quot; class=&quot;headerlink&quot; title=&quot;本脚本适用环境&quot;&gt;&lt;/a&gt;本脚本适用环境&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;系统支持：CentOS 32或64位&lt;br&gt;内存要求：≥128M&lt;/p&gt;

    
    </summary>
    
      <category term="System" scheme="http://n.jourk.com/categories/System/"/>
    
    
      <category term="vpn" scheme="http://n.jourk.com/tags/vpn/"/>
    
  </entry>
  
  <entry>
    <title>VPN-CentOS下搭建PPTP</title>
    <link href="http://n.jourk.com/System/vpn/VPN-CentOS%E4%B8%8B%E6%90%AD%E5%BB%BAPPTP/"/>
    <id>http://n.jourk.com/System/vpn/VPN-CentOS下搭建PPTP/</id>
    <published>2015-10-14T03:27:06.000Z</published>
    <updated>2016-04-23T09:16:48.605Z</updated>
    
    <content type="html">&lt;h2 id=&quot;检测PPP和tun是否开启&quot;&gt;&lt;a href=&quot;#检测PPP和tun是否开启&quot; class=&quot;headerlink&quot; title=&quot;检测PPP和tun是否开启&quot;&gt;&lt;/a&gt;检测PPP和tun是否开启&lt;/h2&gt;&lt;p&gt;命令如下&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# cat /dev/ppp&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;开启成功的标志：&lt;code&gt;cat: /dev/ppp: No such file or directory&lt;/code&gt;或者 &lt;code&gt;cat: /dev/ppp: No such device or address&lt;/code&gt;，可以继续安装过程.&lt;/p&gt;
&lt;p&gt;开启不成功的标志：&lt;code&gt;cat: /dev/ppp: Permission denied&lt;/code&gt;，请联系服务商开启。&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cat /dev/net/tun&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;显示结果为下面的文本，表明通过：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cat: /dev/net/tun: File descriptor in bad state&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;上述两条&lt;code&gt;只需一条通过&lt;/code&gt;，即可安装&lt;code&gt;pptp&lt;/code&gt;。如果还有其它问题，或者请你的服务商来解决这个问题。&lt;/p&gt;
&lt;h2 id=&quot;安装ppp&quot;&gt;&lt;a href=&quot;#安装ppp&quot; class=&quot;headerlink&quot; title=&quot;安装ppp&quot;&gt;&lt;/a&gt;安装ppp&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;rpm -ivh http://poptop.sourceforge.net/yum/stable/rhel6/x86_64/ppp-2.4.5-33.0.rhel6.x86_64.rpm&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;安装pptp&quot;&gt;&lt;a href=&quot;#安装pptp&quot; class=&quot;headerlink&quot; title=&quot;安装pptp&quot;&gt;&lt;/a&gt;安装pptp&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;rpm -ivh https://www.dropbox.com/s/n5c9uekdrgyqtll/pptpd-1.4.0-1.el6.i686.rpm&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;配置pptp&quot;&gt;&lt;a href=&quot;#配置pptp&quot; class=&quot;headerlink&quot; title=&quot;配置pptp&quot;&gt;&lt;/a&gt;配置pptp&lt;/h2&gt;&lt;p&gt;首先我们要编辑&lt;code&gt;/etc/pptpd.conf&lt;/code&gt;文件&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vi /etc/pptpd.conf&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;把下面字段前面的#去掉即可：&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;localip 192.168.0.1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;remoteip 192.168.0.234-238,192.168.0.245&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;接下来再编辑&lt;code&gt;/etc/ppp/options.pptpd&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vi /etc/ppp/options.pptpd&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;去掉&lt;code&gt;ms-dns&lt;/code&gt;前面的&lt;code&gt;#&lt;/code&gt;，并修改成如下字段&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ms-dns 8.8.8.8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ms-dns 8.8.4.4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;设置pptp-VPN账号密码&quot;&gt;&lt;a href=&quot;#设置pptp-VPN账号密码&quot; class=&quot;headerlink&quot; title=&quot;设置pptp VPN账号密码&quot;&gt;&lt;/a&gt;设置pptp VPN账号密码&lt;/h2&gt;&lt;p&gt;我们需要编辑&lt;code&gt;/etc/ppp/chap-secrets&lt;/code&gt;这个文件：&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vi /etc/ppp/chap-secrets&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;第一和第三个单词分别是用户和密码，注意都是&lt;code&gt;区分大小写&lt;/code&gt;的：（此处搞错会导致651错误）&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;crazy pptpd crazymima *&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;修改内核设置，使其支持转发&quot;&gt;&lt;a href=&quot;#修改内核设置，使其支持转发&quot; class=&quot;headerlink&quot; title=&quot;修改内核设置，使其支持转发&quot;&gt;&lt;/a&gt;修改内核设置，使其支持转发&lt;/h2&gt;&lt;p&gt;编辑&lt;code&gt;/etc/sysctl.conf&lt;/code&gt;文件：&lt;/p&gt;
&lt;p&gt;将&lt;code&gt;net.ipv4.ip_forward&lt;/code&gt;改为&lt;code&gt;1&lt;/code&gt;：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.ip_forward=1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;同时在&lt;code&gt;net.ipv4.tcp_syncookies = 1&lt;/code&gt;前面加&lt;code&gt;#&lt;/code&gt; ：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# net.ipv4.tcp_syncookies = 1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;保存退出，并执行下面的命令来生效它&quot;&gt;&lt;a href=&quot;#保存退出，并执行下面的命令来生效它&quot; class=&quot;headerlink&quot; title=&quot;保存退出，并执行下面的命令来生效它&quot;&gt;&lt;/a&gt;保存退出，并执行下面的命令来生效它&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sysctl -p&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;错误及解决办法&quot;&gt;&lt;a href=&quot;#错误及解决办法&quot; class=&quot;headerlink&quot; title=&quot;错误及解决办法&quot;&gt;&lt;/a&gt;错误及解决办法&lt;/h2&gt;&lt;p&gt;一般这是因为我们没有加载&lt;code&gt;bridge模块&lt;/code&gt;，需要手工加载。解决过程如下：&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;modprobe bridge&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;lsmod|grep bridge&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;但是openvz架构的vps执行的时候可能会出现新的错误.&lt;/p&gt;
&lt;p&gt;这个问题是因为openvz的centos的模版的问题，要进行修复操作,修复也很简单,总共四个命令~&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;rm &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt; /sbin/modprobe&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ln &lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt; /bin/&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt; /sbin/modprobe&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rm &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt; /sbin/sysctl&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ln &lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt; /bin/&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt; /sbin/sysctl&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这样就重建这两个模块的软连接,openvz的centos的模版就修复好了。&lt;/p&gt;
&lt;p&gt;执行&lt;code&gt;sysctl -p&lt;/code&gt;也果断没有报错了。&lt;/p&gt;
&lt;h2 id=&quot;添加iptables转发规则&quot;&gt;&lt;a href=&quot;#添加iptables转发规则&quot; class=&quot;headerlink&quot; title=&quot;添加iptables转发规则&quot;&gt;&lt;/a&gt;添加iptables转发规则&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;iptables -t nat -A POSTROUTING &lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt; 192.168.0.0/24 -j SNAT –to-source 107.161.25.176&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(OpenVZ, 107.161.25.176为你的VPS的公网IP地址)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;iptables -t nat -A POSTROUTING &lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt; 192.168.0.0/24 -o eth0 -j MASQUERADE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(XEN)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;保存iptables转发规则&quot;&gt;&lt;a href=&quot;#保存iptables转发规则&quot; class=&quot;headerlink&quot; title=&quot;保存iptables转发规则&quot;&gt;&lt;/a&gt;保存iptables转发规则&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;/etc/init.d/iptables save&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;iptables转发规则写错了会出现错误&lt;code&gt;678提示&lt;/code&gt;（亲历），可用&lt;code&gt;iptables -F&lt;/code&gt;删除旧规则再配置！&lt;/p&gt;
&lt;h2 id=&quot;重启iptables&quot;&gt;&lt;a href=&quot;#重启iptables&quot; class=&quot;headerlink&quot; title=&quot;重启iptables&quot;&gt;&lt;/a&gt;重启iptables&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;/etc/init.d/iptables restart&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;重启pptp服务&quot;&gt;&lt;a href=&quot;#重启pptp服务&quot; class=&quot;headerlink&quot; title=&quot;重启pptp服务&quot;&gt;&lt;/a&gt;重启pptp服务&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;/etc/init.d/pptpd restart&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;设置开机自动运行服务&quot;&gt;&lt;a href=&quot;#设置开机自动运行服务&quot; class=&quot;headerlink&quot; title=&quot;设置开机自动运行服务&quot;&gt;&lt;/a&gt;设置开机自动运行服务&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;chkconfig pptpd on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;chkconfig iptables on&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果出现&lt;code&gt;错误619&lt;/code&gt;则输入命令&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;rm /dev/ppp&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mknod /dev/ppp c 108 0&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;还不管用的话（有时出现&lt;code&gt;错误651&lt;/code&gt;），请下载vps上&lt;code&gt;/var/log/messages&lt;/code&gt;查看日志&lt;/p&gt;
&lt;h2 id=&quot;在Window使用VPN&quot;&gt;&lt;a href=&quot;#在Window使用VPN&quot; class=&quot;headerlink&quot; title=&quot;在Window使用VPN&quot;&gt;&lt;/a&gt;在Window使用VPN&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;打开控制面板的&lt;code&gt;网络和共享中心&lt;/code&gt;或者按&lt;code&gt;Win+X+P&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;点击&lt;code&gt;连接到工作区&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;创建新连接&lt;/li&gt;
&lt;li&gt;选择&lt;code&gt;使用我的internet连接到VPN&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;然后输入&lt;code&gt;VPN服务器地址&lt;/code&gt;点确定就完事儿了。&lt;/p&gt;
&lt;p&gt;VPN连接时输入自己VPN的用户名和密码。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;检测PPP和tun是否开启&quot;&gt;&lt;a href=&quot;#检测PPP和tun是否开启&quot; class=&quot;headerlink&quot; title=&quot;检测PPP和tun是否开启&quot;&gt;&lt;/a&gt;检测PPP和tun是否开启&lt;/h2&gt;&lt;p&gt;命令如下&lt;/p&gt;
&lt;figure class=&quot;hi
    
    </summary>
    
      <category term="System" scheme="http://n.jourk.com/categories/System/"/>
    
    
      <category term="vpn" scheme="http://n.jourk.com/tags/vpn/"/>
    
  </entry>
  
  <entry>
    <title>Scala-CentOS下安装Sbt</title>
    <link href="http://n.jourk.com/Notes/Scala/Scala-CentOS%E4%B8%8B%E5%AE%89%E8%A3%85Sbt/"/>
    <id>http://n.jourk.com/Notes/Scala/Scala-CentOS下安装Sbt/</id>
    <published>2015-06-09T03:24:06.000Z</published>
    <updated>2016-04-22T07:38:52.867Z</updated>
    
    <content type="html">&lt;blockquote&gt;
&lt;p&gt;参见官网配置说明&lt;a href=&quot;http://www.scala-sbt.org/release/tutorial/Manual-Installation.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.scala-sbt.org/release/tutorial/Manual-Installation.html&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;下载sbt通用平台压缩包&quot;&gt;&lt;a href=&quot;#下载sbt通用平台压缩包&quot; class=&quot;headerlink&quot; title=&quot;下载sbt通用平台压缩包&quot;&gt;&lt;/a&gt;下载sbt通用平台压缩包&lt;/h2&gt;&lt;p&gt;sbt-0.13.8.tgz&lt;br&gt;&lt;a href=&quot;http://www.scala-sbt.org/download.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.scala-sbt.org/download.html&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;建立目录，解压文件到所建立目录&quot;&gt;&lt;a href=&quot;#建立目录，解压文件到所建立目录&quot; class=&quot;headerlink&quot; title=&quot;建立目录，解压文件到所建立目录&quot;&gt;&lt;/a&gt;建立目录，解压文件到所建立目录&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo mkdir /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/sbt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo tar zxvf sbt-0.13.8.tgz -C /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;建立启动sbt的脚本文件&quot;&gt;&lt;a href=&quot;#建立启动sbt的脚本文件&quot; class=&quot;headerlink&quot; title=&quot;建立启动sbt的脚本文件&quot;&gt;&lt;/a&gt;建立启动sbt的脚本文件&lt;/h2&gt;&lt;p&gt;选定一个位置，建立启动sbt的脚本文本文件，如&lt;code&gt;/usr/local/sbt/&lt;/code&gt;目录下面新建文件名为sbt的文本文件&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/sbt/&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vim sbt&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在sbt文本文件中添加&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;BT_OPTS=”-Xms512M -Xmx1536M -Xss1M -XX:+CMSClassUnloadingEnabled -XX:MaxPermSize=256M”&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;java $SBT_OPTS -jar bin/sbt-launch.jar “$@”&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后按&lt;code&gt;esc&lt;/code&gt;键 输入 &lt;code&gt;:wq&lt;/code&gt; 保存退出，注意红色字体中的路径可以是绝对路径也可以是相对路径，只要能够正确的定位到解压的sbt文件包中的&lt;code&gt;sbt-launch.jar&lt;/code&gt;文件即可&lt;/p&gt;
&lt;h2 id=&quot;修改sbt文件权限&quot;&gt;&lt;a href=&quot;#修改sbt文件权限&quot; class=&quot;headerlink&quot; title=&quot;修改sbt文件权限&quot;&gt;&lt;/a&gt;修改sbt文件权限&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;chmod u+x sbt&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;配置PATH环境变量&quot;&gt;&lt;a href=&quot;#配置PATH环境变量&quot; class=&quot;headerlink&quot; title=&quot;配置PATH环境变量&quot;&gt;&lt;/a&gt;配置PATH环境变量&lt;/h2&gt;&lt;p&gt;保证在控制台中可以使用sbt命令&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vim /ect/profile&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在文件尾部添加如下代码后，保存退出&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;export PATH=/usr/local/sbt/:$PATH&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;使配置文件立刻生效&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;source&lt;/span&gt; /etc/profile&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;测试sbt是否安装成功&quot;&gt;&lt;a href=&quot;#测试sbt是否安装成功&quot; class=&quot;headerlink&quot; title=&quot;测试sbt是否安装成功&quot;&gt;&lt;/a&gt;测试sbt是否安装成功&lt;/h2&gt;&lt;p&gt;第一次执行时，会下载一些文件包，然后才能正常使用，要确保联网了，安装成功后显示如下&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sbt sbt-version&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[info] Set current project to sbt (in build file:/usr/local/sbt/)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[info] 0.13.8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;参见官网配置说明&lt;a href=&quot;http://www.scala-sbt.org/release/tutorial/Manual-Installation.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://w
    
    </summary>
    
      <category term="Notes" scheme="http://n.jourk.com/categories/Notes/"/>
    
    
      <category term="scala" scheme="http://n.jourk.com/tags/scala/"/>
    
  </entry>
  
  <entry>
    <title>Spark-基础教程5-RDD变换Transformation</title>
    <link href="http://n.jourk.com/Notes/Spark/Spark-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B5-RDD%E5%8F%98%E6%8D%A2Transformation/"/>
    <id>http://n.jourk.com/Notes/Spark/Spark-基础教程5-RDD变换Transformation/</id>
    <published>2015-06-08T03:24:06.000Z</published>
    <updated>2016-04-23T05:50:52.333Z</updated>
    
    <content type="html">&lt;h2 id=&quot;map-映射&quot;&gt;&lt;a href=&quot;#map-映射&quot; class=&quot;headerlink&quot; title=&quot;map : 映射&quot;&gt;&lt;/a&gt;map : 映射&lt;/h2&gt;&lt;p&gt;&lt;code&gt;映射&lt;/code&gt;变换使用一个&lt;code&gt;映射函数&lt;/code&gt;对RDD中的每个记录进行变换,每个记录变换后的新值集合构成一个新的RDD。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt; 语法 &lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;map&lt;/span&gt;&lt;/span&gt;[&lt;span class=&quot;type&quot;&gt;U&lt;/span&gt;](f: (&lt;span class=&quot;type&quot;&gt;T&lt;/span&gt;) =&amp;gt; &lt;span class=&quot;type&quot;&gt;U&lt;/span&gt;)(&lt;span class=&quot;keyword&quot;&gt;implicit&lt;/span&gt; arg0: &lt;span class=&quot;type&quot;&gt;ClassTag&lt;/span&gt;[&lt;span class=&quot;type&quot;&gt;U&lt;/span&gt;]): &lt;span class=&quot;type&quot;&gt;RDD&lt;/span&gt;[&lt;span class=&quot;type&quot;&gt;U&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt; 参数 &lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;f: 映射函数,输入参数为原RDD中的一个记录,返回值构成新RDD中的一个记录。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt; 示例 &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;下面的示例将textFile的每个记录（字符串）变换为其长度值,获得一个新的RDD,然后取回第一个记录查看：&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; textFile.map(line=&amp;gt;line.length).first()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;res13:&lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;14&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;请使用你创建的textFile变量,计算全部的单词数量。&lt;/p&gt;
&lt;h2 id=&quot;filter-过滤&quot;&gt;&lt;a href=&quot;#filter-过滤&quot; class=&quot;headerlink&quot; title=&quot;filter : 过滤&quot;&gt;&lt;/a&gt;filter : 过滤&lt;/h2&gt;&lt;p&gt;&lt;code&gt;过滤&lt;/code&gt;变换使用一个&lt;code&gt;筛选函数&lt;/code&gt;对RDD中的每个记录进行筛选,只有筛选函数返回真值的记录,才 被选中用来构造新的RDD。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt; 语法 &lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;filter&lt;/span&gt;&lt;/span&gt;(f: (&lt;span class=&quot;type&quot;&gt;T&lt;/span&gt;) =&amp;gt; &lt;span class=&quot;type&quot;&gt;Boolean&lt;/span&gt;): &lt;span class=&quot;type&quot;&gt;RDD&lt;/span&gt;[&lt;span class=&quot;type&quot;&gt;T&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt; 参数 &lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;f: 筛选函数,输入参数为原RDD中的一个元素,返回值为True或False。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt; 示例 &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;下面的示例仅保留原RDD中字符数多于20个的记录（行）,获得一个新的RDD,然后取回第一个 记录查看：&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; textFile.filter(line=&amp;gt;line.length&amp;gt;&lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;).first()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;res20: &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt; = &lt;span class=&quot;type&quot;&gt;Spark&lt;/span&gt; is a fast and generic ...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;请使用你创建的textFile变量,返回所有长度不超过5的单词,保存到变量 Word5 中。&lt;/p&gt;
&lt;h2 id=&quot;sample-采样&quot;&gt;&lt;a href=&quot;#sample-采样&quot; class=&quot;headerlink&quot; title=&quot;sample : 采样&quot;&gt;&lt;/a&gt;sample : 采样&lt;/h2&gt;&lt;p&gt;&lt;code&gt;采样&lt;/code&gt;变换根据给定的&lt;code&gt;随机种子&lt;/code&gt;,从RDD中&lt;code&gt;随机地&lt;/code&gt;按&lt;code&gt;指定比例&lt;/code&gt;选一部分记录,创建新的RDD。采样变换 在机器学习中可用于进行交叉验证。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt; 语法 &lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;sample&lt;/span&gt;&lt;/span&gt;(withReplacement: &lt;span class=&quot;type&quot;&gt;Boolean&lt;/span&gt;, fraction: &lt;span class=&quot;type&quot;&gt;Double&lt;/span&gt;, seed: &lt;span class=&quot;type&quot;&gt;Long&lt;/span&gt; = &lt;span class=&quot;type&quot;&gt;Utils&lt;/span&gt;.random.nextLong): &lt;span class=&quot;type&quot;&gt;RDD&lt;/span&gt;[&lt;span class=&quot;type&quot;&gt;T&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt; 参数 &lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;withReplacement: Boolean , True表示进行替换采样,False表示进行非替换采样&lt;/li&gt;
&lt;li&gt;fraction: Double, 在0~1之间的一个浮点值,表示要采样的记录在全体记录中的比例&lt;/li&gt;
&lt;li&gt;seed：随机种子&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt; 示例 &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;下面的示例从原RDD中随机选择20%的记录,构造一个新的RDD,然后返回新RDD的记录数：&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; textFile.sample(&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;0.2&lt;/span&gt;).count()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;res12: &lt;span class=&quot;type&quot;&gt;Long&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;26&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;请使用你创建的textFile变量,随机抽取10%的单词,保存到变量 wordShuffle 中。&lt;/p&gt;
&lt;h2 id=&quot;union-合并&quot;&gt;&lt;a href=&quot;#union-合并&quot; class=&quot;headerlink&quot; title=&quot;union : 合并&quot;&gt;&lt;/a&gt;union : 合并&lt;/h2&gt;&lt;p&gt;&lt;code&gt;合并&lt;/code&gt;变换将两个RDD合并为一个新的RDD,重复的记录&lt;code&gt;不会&lt;/code&gt;被剔除。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt; 语法 &lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;union&lt;/span&gt;&lt;/span&gt;(other: &lt;span class=&quot;type&quot;&gt;RDD&lt;/span&gt;[&lt;span class=&quot;type&quot;&gt;T&lt;/span&gt;]): &lt;span class=&quot;type&quot;&gt;RDD&lt;/span&gt;[&lt;span class=&quot;type&quot;&gt;T&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt; 参数 &lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;other: 第二个RDD&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt; 示例 &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;下面的示例,首先对textFile这个RDD进行一个每行反转的映射变换,获得一个新的RDD,再 将这个新的RDD和原来的RDD：textFile进行合并,最后我们使用count查看一下总记录数：&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; textFile.map(line=&amp;gt;line.reverse).union(textFile).count()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;res13: &lt;span class=&quot;type&quot;&gt;Long&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;282&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;可以看到,合并后的总记录数是原来的2倍。&lt;/p&gt;
&lt;p&gt;请使用你创建的textFile变量,与它自身合并,计算最终的记录总数,并保存到变量 countAgain 中。&lt;/p&gt;
&lt;h2 id=&quot;intersection-相交&quot;&gt;&lt;a href=&quot;#intersection-相交&quot; class=&quot;headerlink&quot; title=&quot;intersection : 相交&quot;&gt;&lt;/a&gt;intersection : 相交&lt;/h2&gt;&lt;p&gt;&lt;code&gt;相交&lt;/code&gt;变换仅取两个RDD&lt;code&gt;共同&lt;/code&gt;的记录,构造一个新的RDD。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt; 语法 &lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;intersection&lt;/span&gt;&lt;/span&gt;(other: &lt;span class=&quot;type&quot;&gt;RDD&lt;/span&gt;[&lt;span class=&quot;type&quot;&gt;T&lt;/span&gt;]): &lt;span class=&quot;type&quot;&gt;RDD&lt;/span&gt;[&lt;span class=&quot;type&quot;&gt;T&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt; 参数 &lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;other: 第二个RDD&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt; 示例 &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;下面的示例将每个记录进行逆转后的RDD与原RDD相交,获得一个新的RDD,我们使用collect回收全部 数据以便显示：&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; textFile.map(line=&amp;gt;line.reverse).intersection(textFile).collect()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;res27: &lt;span class=&quot;type&quot;&gt;Array&lt;/span&gt;[&lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;] =&lt;span class=&quot;type&quot;&gt;Array&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot; &quot;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;可以看到,只有空行被保留下来,因为空行的逆序保持不变。&lt;/p&gt;
&lt;p&gt;请使用你创建的textFile变量,与它自身相交,计算最终的记录总数。&lt;/p&gt;
&lt;h2 id=&quot;distinct-剔重&quot;&gt;&lt;a href=&quot;#distinct-剔重&quot; class=&quot;headerlink&quot; title=&quot;distinct : 剔重&quot;&gt;&lt;/a&gt;distinct : 剔重&lt;/h2&gt;&lt;p&gt;&lt;code&gt;剔重&lt;/code&gt;变换剔除RDD中的&lt;code&gt;重复&lt;/code&gt;记录,返回一个新的RDD。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt; 语法 &lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;distinct&lt;/span&gt;&lt;/span&gt;(): &lt;span class=&quot;type&quot;&gt;RDD&lt;/span&gt;[&lt;span class=&quot;type&quot;&gt;T&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt; 示例 &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;下面的示例将RDD中重复的行剔除,并返回新RDD中的记录数：&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; textFile.distinct().count()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;res20: &lt;span class=&quot;type&quot;&gt;Long&lt;/span&gt; =&lt;span class=&quot;number&quot;&gt;91&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;请使用你创建的textFile变量,计算所有不重复的单词总数。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;map-映射&quot;&gt;&lt;a href=&quot;#map-映射&quot; class=&quot;headerlink&quot; title=&quot;map : 映射&quot;&gt;&lt;/a&gt;map : 映射&lt;/h2&gt;&lt;p&gt;&lt;code&gt;映射&lt;/code&gt;变换使用一个&lt;code&gt;映射函数&lt;/code&gt;对RDD中的每个记录进行
    
    </summary>
    
      <category term="Notes" scheme="http://n.jourk.com/categories/Notes/"/>
    
    
      <category term="spark" scheme="http://n.jourk.com/tags/spark/"/>
    
  </entry>
  
  <entry>
    <title>Spark-基础教程4-RDD动作Action</title>
    <link href="http://n.jourk.com/Notes/Spark/Spark-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B4-RDD%E5%8A%A8%E4%BD%9CAction/"/>
    <id>http://n.jourk.com/Notes/Spark/Spark-基础教程4-RDD动作Action/</id>
    <published>2015-06-07T03:24:06.000Z</published>
    <updated>2016-04-23T05:34:14.116Z</updated>
    
    <content type="html">&lt;h2 id=&quot;count-：计数&quot;&gt;&lt;a href=&quot;#count-：计数&quot; class=&quot;headerlink&quot; title=&quot;count ：计数&quot;&gt;&lt;/a&gt;count ：计数&lt;/h2&gt;&lt;p&gt;使用&lt;code&gt;count&lt;/code&gt;成员函数获得RDD对象的成员&lt;code&gt;总数&lt;/code&gt;，返回值为&lt;code&gt;长整型&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt; 语法 &lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;count&lt;/span&gt;&lt;/span&gt;(): &lt;span class=&quot;type&quot;&gt;Long&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt; 返回值 &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;长整型，表示成员总数量。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt; 示例 &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;下面的示例返回文件的总行数（记录数）：&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; textFile.count() &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;res0: &lt;span class=&quot;type&quot;&gt;Long&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;126&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;请使用你创建的textFile变量，计算文件的总行数。&lt;/p&gt;
&lt;h2 id=&quot;top-：前N个记录&quot;&gt;&lt;a href=&quot;#top-：前N个记录&quot; class=&quot;headerlink&quot; title=&quot;top ：前N个记录&quot;&gt;&lt;/a&gt;top ：前N个记录&lt;/h2&gt;&lt;p&gt;使用&lt;code&gt;top&lt;/code&gt;成员函数获得RDD中的前&lt;code&gt;N个记录&lt;/code&gt;，可以指定一个&lt;code&gt;排序函数&lt;/code&gt;进行排序比较。 如果不指定排序函数，那么使用默认的Ascii码序进行记录排序。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt; 语法 &lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;top&lt;/span&gt;&lt;/span&gt;(num: &lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt;)(&lt;span class=&quot;keyword&quot;&gt;implicit&lt;/span&gt; ord: &lt;span class=&quot;type&quot;&gt;Ordering&lt;/span&gt;[&lt;span class=&quot;type&quot;&gt;T&lt;/span&gt;]): &lt;span class=&quot;type&quot;&gt;Array&lt;/span&gt;[&lt;span class=&quot;type&quot;&gt;T&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt; 参数 &lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;num： Int , 要返回的记录数量&lt;/li&gt;
&lt;li&gt;ord: Ordering[T] , 排序函数&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt; 返回值 &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;包含前N个记录的数组，记录类型为T。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt; 示例 &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;下面的示例返回使用默认排序后的头两个记录&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; textFile.top(&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;res28:&lt;span class=&quot;type&quot;&gt;Array&lt;/span&gt;[&lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;] = &lt;span class=&quot;type&quot;&gt;Array&lt;/span&gt;(your original work... ,you agree to...)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;请使用你创建的textFile变量，读取前两行，存入变量 top2 中。&lt;/p&gt;
&lt;h2 id=&quot;take：无序采样&quot;&gt;&lt;a href=&quot;#take：无序采样&quot; class=&quot;headerlink&quot; title=&quot;take：无序采样&quot;&gt;&lt;/a&gt;take：无序采样&lt;/h2&gt;&lt;p&gt;使用&lt;code&gt;take&lt;/code&gt;成员函数获得&lt;code&gt;指定数量&lt;/code&gt;的记录，返回一个数组。与&lt;code&gt;top&lt;/code&gt;不同，&lt;code&gt;take&lt;/code&gt;在提取记录 前不进行排序，它仅仅逐分区地提取够指定数量的记录就返回结果。可以将take方法 视为对RDD对象的&lt;code&gt;无序&lt;/code&gt;采样。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt; 语法 &lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;take&lt;/span&gt;&lt;/span&gt;(num: &lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt;): &lt;span class=&quot;type&quot;&gt;Array&lt;/span&gt;[&lt;span class=&quot;type&quot;&gt;T&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt; 参数 &lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;num: Int , 要获取的记录数量&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt; 返回值 &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;包含指定数量记录的数组，记录类型为T。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt; 示例 &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;下面的示例返回文件中的两行（两个成员）：&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; textFile.take(&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;res1: &lt;span class=&quot;type&quot;&gt;Array&lt;/span&gt;[&lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;] = &lt;span class=&quot;type&quot;&gt;Array&lt;/span&gt;(# &lt;span class=&quot;type&quot;&gt;Apache&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;Spark&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;请使用你创建的textFile变量，读取两行，存入变量 take2 中。&lt;/p&gt;
&lt;h2 id=&quot;first-取第一个记录&quot;&gt;&lt;a href=&quot;#first-取第一个记录&quot; class=&quot;headerlink&quot; title=&quot;first : 取第一个记录&quot;&gt;&lt;/a&gt;first : 取第一个记录&lt;/h2&gt;&lt;p&gt;使用&lt;code&gt;first&lt;/code&gt;成员函数获得RDD中的&lt;code&gt;第一个&lt;/code&gt;记录。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt; 语法 &lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;first&lt;/span&gt;&lt;/span&gt;(): &lt;span class=&quot;type&quot;&gt;T&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt; 示例 &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;下面的示例返回文件的第一行（RDD的第一个记录）：&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; textFile.first()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;res1: &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt; = # &lt;span class=&quot;type&quot;&gt;Apache&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;Spark&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;请使用你创建的textFile变量，读取第一行，存入变量 Line1 中。&lt;/p&gt;
&lt;h2 id=&quot;max-取值最大的记录&quot;&gt;&lt;a href=&quot;#max-取值最大的记录&quot; class=&quot;headerlink&quot; title=&quot;max : 取值最大的记录&quot;&gt;&lt;/a&gt;max : 取值最大的记录&lt;/h2&gt;&lt;p&gt;使用&lt;code&gt;max&lt;/code&gt;成员函数获得&lt;code&gt;值最大&lt;/code&gt;的记录，可以指定一个排序函数进行&lt;code&gt;排序比较&lt;/code&gt;。默认使用 Ascii码序进行排序。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt; 语法 &lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;max&lt;/span&gt;&lt;/span&gt;()(&lt;span class=&quot;keyword&quot;&gt;implicit&lt;/span&gt; ord: &lt;span class=&quot;type&quot;&gt;Ordering&lt;/span&gt;[&lt;span class=&quot;type&quot;&gt;T&lt;/span&gt;]): &lt;span class=&quot;type&quot;&gt;T&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt; 参数 &lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ord : Ordering[T] , 排序函数&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt; 示例 &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;下面的示例按字符串比较顺序找出最大的行记录：&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; textFile.max()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;res10: &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt; = your original work and that you license the ...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;请使用你创建的textFile变量，读取最大的行长度。&lt;/p&gt;
&lt;h2 id=&quot;min-取值最小的记录&quot;&gt;&lt;a href=&quot;#min-取值最小的记录&quot; class=&quot;headerlink&quot; title=&quot;min : 取值最小的记录&quot;&gt;&lt;/a&gt;min : 取值最小的记录&lt;/h2&gt;&lt;p&gt;使用&lt;code&gt;min&lt;/code&gt;成员函数获得&lt;code&gt;值最小&lt;/code&gt;的记录，可以指定一个&lt;code&gt;排序函数&lt;/code&gt;进行排序比较。默认使用 Ascii码序进行排序。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt; 语法 &lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;min&lt;/span&gt;&lt;/span&gt;()(&lt;span class=&quot;keyword&quot;&gt;implicit&lt;/span&gt; ord: &lt;span class=&quot;type&quot;&gt;Ordering&lt;/span&gt;[&lt;span class=&quot;type&quot;&gt;T&lt;/span&gt;]): &lt;span class=&quot;type&quot;&gt;T&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt; 参数 &lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ord : Ordering[T] , 排序函数&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt; 示例 &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;下面的示例按字符串比较顺序找出最小的行记录：&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; textFile.min()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;res &lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;: &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;请使用你创建的textFile变量，读取最小的行长度。&lt;/p&gt;
&lt;h2 id=&quot;reduce-规约RDD&quot;&gt;&lt;a href=&quot;#reduce-规约RDD&quot; class=&quot;headerlink&quot; title=&quot;reduce : 规约RDD&quot;&gt;&lt;/a&gt;reduce : 规约RDD&lt;/h2&gt;&lt;p&gt;使用&lt;code&gt;reduce&lt;/code&gt;成员函数对RDD进行规约操作，&lt;code&gt;必须&lt;/code&gt;指定一个函数指定&lt;code&gt;规约行为&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt; 语法 &lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;reduce&lt;/span&gt;&lt;/span&gt;(f: (&lt;span class=&quot;type&quot;&gt;T&lt;/span&gt;, &lt;span class=&quot;type&quot;&gt;T&lt;/span&gt;) =&amp;gt; &lt;span class=&quot;type&quot;&gt;T&lt;/span&gt;): &lt;span class=&quot;type&quot;&gt;T&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt; 参数 &lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;f : 规约函数 , 两个参数分别代表RDD中的两个记录，返回值被RDD用来进行递归计算。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt; 示例 &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;下面的示例使用&lt;code&gt;匿名函数&lt;/code&gt;，将所有的记录连接起来构成一个字符串：&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; textFile.reduce((a,b)=&amp;gt;a+b)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;res60:&lt;span class=&quot;type&quot;&gt;String&lt;/span&gt; = #&lt;span class=&quot;type&quot;&gt;Apache&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;SparkSpake&lt;/span&gt; is a fast...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;请使用你创建的textFile变量，返回最长的单词。&lt;/p&gt;
&lt;h2 id=&quot;collect-收集全部记录&quot;&gt;&lt;a href=&quot;#collect-收集全部记录&quot; class=&quot;headerlink&quot; title=&quot;collect : 收集全部记录&quot;&gt;&lt;/a&gt;collect : 收集全部记录&lt;/h2&gt;&lt;p&gt;使用&lt;code&gt;collect&lt;/code&gt;成员函数获得RDD中的&lt;code&gt;所有记录&lt;/code&gt;，返回一个数组。collect方法 可以视为对RDD对象的一个&lt;code&gt;全采样&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt; 语法 &lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;collect&lt;/span&gt;&lt;/span&gt;(): &lt;span class=&quot;type&quot;&gt;Array&lt;/span&gt;[&lt;span class=&quot;type&quot;&gt;T&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt; 示例 &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;下面的示例返回RDD中的所有记录：&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; textFile.collect()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;res10: &lt;span class=&quot;type&quot;&gt;Array&lt;/span&gt;[&lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;] = &lt;span class=&quot;type&quot;&gt;Array&lt;/span&gt;(# &lt;span class=&quot;type&quot;&gt;Apache&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;Spark&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;, &lt;span class=&quot;type&quot;&gt;Spark&lt;/span&gt; is a fast ...)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;请使用你创建的textFile变量，读取全部行，并存入变量 Lines 中。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;count-：计数&quot;&gt;&lt;a href=&quot;#count-：计数&quot; class=&quot;headerlink&quot; title=&quot;count ：计数&quot;&gt;&lt;/a&gt;count ：计数&lt;/h2&gt;&lt;p&gt;使用&lt;code&gt;count&lt;/code&gt;成员函数获得RDD对象的成员&lt;code&gt;总数
    
    </summary>
    
      <category term="Notes" scheme="http://n.jourk.com/categories/Notes/"/>
    
    
      <category term="spark" scheme="http://n.jourk.com/tags/spark/"/>
    
  </entry>
  
  <entry>
    <title>Spark-基础教程3-交互分析</title>
    <link href="http://n.jourk.com/Notes/Spark/Spark-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B3-%E4%BA%A4%E4%BA%92%E5%88%86%E6%9E%90/"/>
    <id>http://n.jourk.com/Notes/Spark/Spark-基础教程3-交互分析/</id>
    <published>2015-06-06T03:24:06.000Z</published>
    <updated>2016-04-23T05:13:03.739Z</updated>
    
    <content type="html">&lt;h2 id=&quot;Spark-Shell&quot;&gt;&lt;a href=&quot;#Spark-Shell&quot; class=&quot;headerlink&quot; title=&quot;Spark Shell&quot;&gt;&lt;/a&gt;Spark Shell&lt;/h2&gt;&lt;p&gt;Spark Shell提供一个简单的方式来学习Spark框架的API，同时也是一个可以用于交互数据分析的强大 工具。我们在本课程中使用Spark Shell的Scala版本。&lt;/p&gt;
&lt;p&gt;在Spark目录中运行下面命令启动Spark Shell：&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/spark&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./bin/spark-shell&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在一堆balabala的提示信息后，我们看到了Spark-Shell的提示符：&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;Spark-Shell是一个&lt;code&gt;REPL&lt;/code&gt;解释器，我们输入Scala表达式后，按&lt;code&gt;回车&lt;/code&gt;就可以看到执行结果。&lt;/p&gt;
&lt;p&gt;比如，要看Spark的版本，在提示符下输入：&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; sc.version&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;res2: &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;1.3&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;执行的结果反馈总是以 &lt;code&gt;变量名: 类型 = 值&lt;/code&gt; 的形式显示。在上面的结果中，可以看到，执行的结果被放入一个 临时变量res2中，类型是String，值是1.3.1 。&lt;/p&gt;
&lt;p&gt;看看你的Spark的版本是多少？&lt;/p&gt;
&lt;h2 id=&quot;集群对象：SparkContext&quot;&gt;&lt;a href=&quot;#集群对象：SparkContext&quot; class=&quot;headerlink&quot; title=&quot;集群对象：SparkContext&quot;&gt;&lt;/a&gt;集群对象：SparkContext&lt;/h2&gt;&lt;p&gt;当我们启动Spark-Shell后，就自动获得一个SparkContext对象实例，这个对象被存入变量&lt;code&gt;sc&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;在提示符下输入：&lt;code&gt;sc&lt;/code&gt; ，可以看到sc的类型是&lt;code&gt;org.apache.spark.SparkContext&lt;/code&gt;：&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; sc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;res1: org.apache.spark.&lt;span class=&quot;type&quot;&gt;SparkContext&lt;/span&gt; = org.apache.spark.&lt;span class=&quot;type&quot;&gt;SparkContext&lt;/span&gt;@&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;c5a3436&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;SparkContext对象代表&lt;code&gt;整个&lt;/code&gt;Spark集群，是Spark框架&lt;code&gt;功能的入口&lt;/code&gt;，可以用来在集群中创建RDD、累加器变量和广播变量。 SparkContext对象创建时可以指明连接到哪个集群管理器上，在Spark-Shell启动时，&lt;code&gt;默认&lt;/code&gt;连接到本地的集群管理器。&lt;/p&gt;
&lt;p&gt;使用SparkContext对象（在Shell里，就是&lt;code&gt;sc&lt;/code&gt;变量）的master方法，可以查看当前连接的集群管理器：&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; sc.master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;res10: &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt; = local[*]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;显示结果表明，我们确实连接到了本地的集群管理器上，*代表不明确指定在每个计算节点上使用的CPU核心数（&lt;code&gt;资源限额&lt;/code&gt;）。&lt;/p&gt;
&lt;p&gt;看看你的sc.master提示什么信息？&lt;/p&gt;
&lt;h2 id=&quot;分布数据集：RDD&quot;&gt;&lt;a href=&quot;#分布数据集：RDD&quot; class=&quot;headerlink&quot; title=&quot;分布数据集：RDD&quot;&gt;&lt;/a&gt;分布数据集：RDD&lt;/h2&gt;&lt;p&gt;Spark的核心抽象是一个分布式数据集，被称为&lt;code&gt;弹性分布数据集（RDD）&lt;/code&gt; ，代表一个&lt;code&gt;不可变的&lt;/code&gt;、&lt;code&gt;可分区&lt;/code&gt;、&lt;code&gt;可被并行处理&lt;/code&gt;的成员集合。&lt;/p&gt;
&lt;p&gt;RDD对象需要利用SparkContext对象的方法创建，Spark支持从多种来源创建RDD对象，比如：从本地文本文件创建、从Hadoop 的HDFS文件创建、或者通过对其他RDD进行变换获得新的RDD。&lt;/p&gt;
&lt;p&gt;下面的示例使用本地Spark目录下的README.md文件创建一个新的RDD：&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; &lt;span class=&quot;keyword&quot;&gt;val&lt;/span&gt; textFile = sc.textFile(&lt;span class=&quot;string&quot;&gt;&quot;README.md&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;textFile: spark.&lt;span class=&quot;type&quot;&gt;RDD&lt;/span&gt;[&lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;] = spark.&lt;span class=&quot;type&quot;&gt;MappedRDD&lt;/span&gt;@&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;ee9b6e3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;我们看到，执行的结果是，返回了一个Spark.RDD类型的变量textFile，RDD是一个&lt;code&gt;模板类&lt;/code&gt;，方括号里的String代表 这个RDD对象&lt;code&gt;成员的类型&lt;/code&gt;。由于是一个对象，因此值用地址表示：spark.MappedRDD@2ee9b7e3 。&lt;/p&gt;
&lt;p&gt;SparkContext对象的textFile方法创建的RDD中，一个&lt;code&gt;成员&lt;/code&gt;对应原始文件的&lt;code&gt;一行&lt;/code&gt;。我们看到在执行的结果中可以看到返回一个 RDD，成员类型为String，我们将这个对象保存在变量textFile中。&lt;/p&gt;
&lt;p&gt;使用README.md文件，创建一个RDD，保存到变量 textFile中。&lt;/p&gt;
&lt;h2 id=&quot;RDD：变换与动作&quot;&gt;&lt;a href=&quot;#RDD：变换与动作&quot; class=&quot;headerlink&quot; title=&quot;RDD：变换与动作&quot;&gt;&lt;/a&gt;RDD：变换与动作&lt;/h2&gt;&lt;p&gt;RDD的内部实现了分布计算的功能，我们在RDD上执行的操作，是&lt;code&gt;透明地&lt;/code&gt;在整个集群上执行的。也就是说，当RDD建立 后，这个RDD就不属于本地了，它在整个集群中有效。当在RDD上执行一个操作，RDD内部需要和&lt;code&gt;集群管理器&lt;/code&gt;进行沟通协商。&lt;/p&gt;
&lt;p&gt;对一个RDD可以进行两种操作：动作（&lt;code&gt;action&lt;/code&gt;）和变换（&lt;code&gt;transformation&lt;/code&gt;）。动作总是从集群中&lt;code&gt;取回数据&lt;/code&gt;，变换总是获得一个&lt;code&gt;新的RDD&lt;/code&gt;，这是两种操作的字面上的差异。&lt;/p&gt;
&lt;p&gt;事实上，当在RDD上执行一个&lt;code&gt;变换&lt;/code&gt;时，RDD仅仅&lt;code&gt;记录&lt;/code&gt;要做的变换，只有当RDD上需要执行一个&lt;code&gt;动作&lt;/code&gt;时，RDD才 通过集群管理器&lt;code&gt;启动&lt;/code&gt;实质分布计算。&lt;/p&gt;
&lt;p&gt;这有点像拍电影，&lt;code&gt;变换&lt;/code&gt;操作只是&lt;code&gt;剧本&lt;/code&gt;，只有导演喊&lt;code&gt;Action&lt;/code&gt;的时候，真正的电影才开始制作。&lt;/p&gt;
&lt;h2 id=&quot;感受动作和变换的区别&quot;&gt;&lt;a href=&quot;#感受动作和变换的区别&quot; class=&quot;headerlink&quot; title=&quot;感受动作和变换的区别&quot;&gt;&lt;/a&gt;感受动作和变换的区别&lt;/h2&gt;&lt;p&gt;我们用一个例子来直观感受下动作和变换的区别。&lt;/p&gt;
&lt;p&gt;下面的例子首先做一个映射变换，然后返回新纪录的条数。&lt;code&gt;map&lt;/code&gt;是一个&lt;code&gt;变换&lt;/code&gt;，负责将原RDD的每个记录变换到新的RDD，&lt;code&gt;count&lt;/code&gt;是一个&lt;code&gt;动作&lt;/code&gt;，负责获取这个RDD的记录总数。&lt;/p&gt;
&lt;p&gt;先执行&lt;code&gt;map&lt;/code&gt;，你应该看到很迅速干净地返回：&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; &lt;span class=&quot;keyword&quot;&gt;val&lt;/span&gt; rdd2=textFile.map(line=&amp;gt;line.length)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rdd2: org.apache.spark.rdd.&lt;span class=&quot;type&quot;&gt;RDD&lt;/span&gt;[&lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt;] = &lt;span class=&quot;type&quot;&gt;MappedRDD&lt;/span&gt;[&lt;span class=&quot;number&quot;&gt;52&lt;/span&gt;] ...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;再执行&lt;code&gt;count&lt;/code&gt;，这会有些不一样：&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; rdd2.count()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;......&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;res10: &lt;span class=&quot;type&quot;&gt;Long&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;141&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;.....&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;当执行map时，我们看到结果很快返回了。但当执行count时，我们可以看到一堆的提示信息，大概的意思就是 和调度器进行了若干沟通才把数据拉回来。&lt;/p&gt;
&lt;p&gt;看起来确实这样，&lt;code&gt;变换&lt;/code&gt;操作就只是写写剧本，&lt;code&gt;Action&lt;/code&gt;才真正开始执行计算任务。&lt;/p&gt;
&lt;p&gt;使用你刚才创建的textFile变量，进行上面的map和reduce操作，感受下map和reduce的区别。&lt;/p&gt;
&lt;h2 id=&quot;RDD动作：获取数据的控制权&quot;&gt;&lt;a href=&quot;#RDD动作：获取数据的控制权&quot; class=&quot;headerlink&quot; title=&quot;RDD动作：获取数据的控制权&quot;&gt;&lt;/a&gt;RDD动作：获取数据的控制权&lt;/h2&gt;&lt;p&gt;对一个RDD执行动作指示集群将指定数据返回本地，返回的数据可能是一个具体的值、一个数组或一个HASH表。&lt;/p&gt;
&lt;p&gt;让我们先执行几个动作：&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; textFile.count() &lt;span class=&quot;comment&quot;&gt;// 这个动作返回RDD中的记录数&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;res0: &lt;span class=&quot;type&quot;&gt;Long&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;126&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; textFile.first() &lt;span class=&quot;comment&quot;&gt;// 这个动作返回RDD中的第一个记录&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;count&lt;/code&gt;是一个动作，负责获取这个RDD的记录总数。&lt;code&gt;first&lt;/code&gt;也是一个动作，负责返回RDD中的第一条记录。&lt;/p&gt;
&lt;p&gt;在使用Spark时，最好在脑海中明确地区隔出两个区域：&lt;code&gt;本地域&lt;/code&gt;和&lt;code&gt;集群域&lt;/code&gt;。RDD属于集群域，那是Spark管辖的地带； RDD的动作结果属于本地域，这是我们的地盘。只有当RDD的数据返回本地域，我们才能进行再加工，比如打印等等。&lt;/p&gt;
&lt;p&gt;请使用你的textFile变量，将其第一条记录保存到变量 x0 中。&lt;/p&gt;
&lt;h2 id=&quot;RDD变换：数据的滤镜&quot;&gt;&lt;a href=&quot;#RDD变换：数据的滤镜&quot; class=&quot;headerlink&quot; title=&quot;RDD变换：数据的滤镜&quot;&gt;&lt;/a&gt;RDD变换：数据的滤镜&lt;/h2&gt;&lt;p&gt;RDD变换将&lt;code&gt;产生&lt;/code&gt;一个新的RDD。下面的例子中，我们执行一个过滤（&lt;code&gt;Filter&lt;/code&gt;）变换，将获得一个新的RDD，由原 RDD中符合过滤条件（即：包含单词&lt;code&gt;Spark&lt;/code&gt;）的记录成员构成：&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; &lt;span class=&quot;keyword&quot;&gt;val&lt;/span&gt; linesWithSpark = textFile.filter(line =&amp;gt; line.contains(&lt;span class=&quot;string&quot;&gt;&quot;Spark&quot;&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;linesWithSpark: spark.&lt;span class=&quot;type&quot;&gt;RDD&lt;/span&gt;[&lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;] = spark.&lt;span class=&quot;type&quot;&gt;FilteredRDD&lt;/span&gt;@&lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;dd4af09&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;变量&lt;code&gt;lineWithSpark&lt;/code&gt;现在是一个RDD，由变量&lt;code&gt;textFile&lt;/code&gt;这个RDD中所有包含”Spark”单词的行构成。&lt;/p&gt;
&lt;p&gt;由于一个RDD变换&lt;code&gt;总是&lt;/code&gt;返回一个新的RDD，因此我们可以将变换和动作使用&lt;code&gt;链式语法&lt;/code&gt;串起来。下面的 例子使用了&lt;code&gt;链式语法&lt;/code&gt;解决一个具体问题：在文件中有多少行包含单词“Spark”？&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; textFile.filter(line =&amp;gt; line.contains(&lt;span class=&quot;string&quot;&gt;&quot;Spark&quot;&lt;/span&gt;)).count() &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;res3: &lt;span class=&quot;type&quot;&gt;Long&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这等同于：&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; &lt;span class=&quot;keyword&quot;&gt;val&lt;/span&gt; rdd1 = textFile.filter(line =&amp;gt; line.contains(&lt;span class=&quot;string&quot;&gt;&quot;Spark&quot;&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; rdd1.count() &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;res12: &lt;span class=&quot;type&quot;&gt;Long&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;用链式语法写起来更流畅一些，不过这只是一种口味的倾向而已。&lt;/p&gt;
&lt;p&gt;请使用你的textFile变量，计算出包含”Apache”的行数。&lt;/p&gt;
&lt;h2 id=&quot;组合的威力&quot;&gt;&lt;a href=&quot;#组合的威力&quot; class=&quot;headerlink&quot; title=&quot;组合的威力&quot;&gt;&lt;/a&gt;组合的威力&lt;/h2&gt;&lt;p&gt;《道德经》说的是简单的东西组合起来也不得了。与之类似（当然还达不到那个高度）， RDD的诸多动作和变换，经过组合也可以实现&lt;code&gt;复杂&lt;/code&gt;的计算，满足相当多现实的数据计算需求。&lt;/p&gt;
&lt;p&gt;假设我们需要找出文件中单词数量最多的行，做个&lt;code&gt;map/reduce&lt;/code&gt;就可以了：&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; textFile.map(line =&amp;gt; line.split(&lt;span class=&quot;string&quot;&gt;&quot; &quot;&lt;/span&gt;).size).reduce((a, b) =&amp;gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (a &amp;gt; b) a &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; b)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;res4: &lt;span class=&quot;type&quot;&gt;Long&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;上面语句首先使用map变换，将每一行（成员）&lt;code&gt;映射&lt;/code&gt;为一个整数值（单词数量），这获得了一个新的RDD。然后在 这个新的RDD上执行reduce动作，找到（返回）了单词数量最多的行。&lt;/p&gt;
&lt;p&gt;请使用你的textFile变量，计算所有单词的数量。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Spark-Shell&quot;&gt;&lt;a href=&quot;#Spark-Shell&quot; class=&quot;headerlink&quot; title=&quot;Spark Shell&quot;&gt;&lt;/a&gt;Spark Shell&lt;/h2&gt;&lt;p&gt;Spark Shell提供一个简单的方式来学习Spark框架的API
    
    </summary>
    
      <category term="Notes" scheme="http://n.jourk.com/categories/Notes/"/>
    
    
      <category term="spark" scheme="http://n.jourk.com/tags/spark/"/>
    
  </entry>
  
  <entry>
    <title>Spark-基础教程2-Scala语言快速扫盲</title>
    <link href="http://n.jourk.com/Notes/Spark/Spark-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B2-Scala%E8%AF%AD%E8%A8%80%E5%BF%AB%E9%80%9F%E6%89%AB%E7%9B%B2/"/>
    <id>http://n.jourk.com/Notes/Spark/Spark-基础教程2-Scala语言快速扫盲/</id>
    <published>2015-06-05T03:24:06.000Z</published>
    <updated>2016-04-23T04:55:36.392Z</updated>
    
    <content type="html">&lt;h2 id=&quot;任性的教授：Martin-Odersky&quot;&gt;&lt;a href=&quot;#任性的教授：Martin-Odersky&quot; class=&quot;headerlink&quot; title=&quot;任性的教授：Martin Odersky&quot;&gt;&lt;/a&gt;任性的教授：Martin Odersky&lt;/h2&gt;&lt;p&gt;Spark是用Scala（发音为 /ˈskɑːlə, ˈskeɪlə/）语言开发的。Scala是一种多范式的编程语言，设计意图是要集成 面向对象编程和函数式编程的各种特性。由于不满Java语言复杂的语法，瑞士洛桑联邦理工学院奥德斯基教授带领小组在2001年创建 了Scala语言（任性~）。&lt;/p&gt;
&lt;p&gt;scala运行在Java虚拟机之上，也就是说scala会被编译为和java编译后的class一样的字节码。 这也代表scala和java是可以互相调用并且它们可以联合编译，不过实际上来说scala调用java很容易，而java调用 scala有时会遇到一些问题。&lt;/p&gt;
&lt;h2 id=&quot;环境准备&quot;&gt;&lt;a href=&quot;#环境准备&quot; class=&quot;headerlink&quot; title=&quot;环境准备&quot;&gt;&lt;/a&gt;环境准备&lt;/h2&gt;&lt;h3 id=&quot;启动Hadoop和Spark&quot;&gt;&lt;a href=&quot;#启动Hadoop和Spark&quot; class=&quot;headerlink&quot; title=&quot;启动Hadoop和Spark&quot;&gt;&lt;/a&gt;启动Hadoop和Spark&lt;/h3&gt;&lt;p&gt;Spark环境中输入：&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/spark&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/bin/spark-shell&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;启动scala环境&quot;&gt;&lt;a href=&quot;#启动scala环境&quot; class=&quot;headerlink&quot; title=&quot;启动scala环境&quot;&gt;&lt;/a&gt;启动scala环境&lt;/h3&gt;&lt;h2 id=&quot;定义变量与常量&quot;&gt;&lt;a href=&quot;#定义变量与常量&quot; class=&quot;headerlink&quot; title=&quot;定义变量与常量&quot;&gt;&lt;/a&gt;定义变量与常量&lt;/h2&gt;&lt;p&gt;在Scala中定义一个变量，使用&lt;code&gt;var&lt;/code&gt;关键字：&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; name = &lt;span class=&quot;string&quot;&gt;&quot;steve&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;name: java.lang.&lt;span class=&quot;type&quot;&gt;String&lt;/span&gt; = steve&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; name = &lt;span class=&quot;string&quot;&gt;&quot;marius&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;name: java.lang.&lt;span class=&quot;type&quot;&gt;String&lt;/span&gt; = marius&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果要定义一个常量，使用&lt;code&gt;val&lt;/code&gt;关键字，常量在首次赋值后不可以改变：&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; &lt;span class=&quot;keyword&quot;&gt;val&lt;/span&gt; two = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; + &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;two: &lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;请定义变量 a ， 值为 123 ; 常量 b ， 值为 “demo” 。&lt;/p&gt;
&lt;h2 id=&quot;函数定义与调用&quot;&gt;&lt;a href=&quot;#函数定义与调用&quot; class=&quot;headerlink&quot; title=&quot;函数定义与调用&quot;&gt;&lt;/a&gt;函数定义与调用&lt;/h2&gt;&lt;p&gt;在Scala中，使用&lt;code&gt;def&lt;/code&gt;关键字定义一个函数，等号左侧是函数名、参数列表和返回值，右侧是函数体实现的表达式。&lt;/p&gt;
&lt;p&gt;下面定义的函数对传入整型参数加1并返回：&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; &lt;span class=&quot;keyword&quot;&gt;val&lt;/span&gt; two = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; + &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;two: &lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;使用函数名，并传入参数进行函数调用：&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala &amp;gt; &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; x = addOne(&lt;span class=&quot;number&quot;&gt;123&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;x : &lt;span class=&quot;number&quot;&gt;124&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果函数体需要多个表达式才能实现，可以使用&lt;code&gt;代码块&lt;/code&gt;将多个表达式包起来：&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala &amp;gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;sum&lt;/span&gt;&lt;/span&gt;(n:&lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt;):&lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt; = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (i &amp;lt;- &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; to &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           r = r*i&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           r &lt;span class=&quot;comment&quot;&gt;// return r 也可以&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果在函数体中不使用&lt;code&gt;return&lt;/code&gt;返回函数值，那么&lt;code&gt;最后一个表达式的值就是函数返回值&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;请定义函数 multiInt ， 有两个Int型参数，返回这两个参数的乘积。&lt;/p&gt;
&lt;h2 id=&quot;超级重要的匿名函数&quot;&gt;&lt;a href=&quot;#超级重要的匿名函数&quot; class=&quot;headerlink&quot; title=&quot;超级重要的匿名函数&quot;&gt;&lt;/a&gt;超级重要的匿名函数&lt;/h2&gt;&lt;p&gt;Scala支持匿名函数，创建匿名函数不需要使用&lt;code&gt;def&lt;/code&gt;关键字，符号&lt;code&gt;=&amp;gt;&lt;/code&gt;的左侧定义 参数列表，右侧定义函数体实现。&lt;/p&gt;
&lt;p&gt;下面的匿名函数为名为x的变量加1并返回结果：&lt;br&gt;&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; (x: &lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt;) =&amp;gt; x + &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;res2: (&lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt;) =&amp;gt; &lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt; = ...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;函数可以&lt;code&gt;赋值&lt;/code&gt;给变量或常量，这是&lt;code&gt;函数式编程&lt;/code&gt;的一个特点。下面将匿名函数赋给addOne常量，后续代码中就可以 使用addOne进行调用了：&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; &lt;span class=&quot;keyword&quot;&gt;val&lt;/span&gt; addOne = (x: &lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt;) =&amp;gt; x + &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;addOne: (&lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt;) =&amp;gt; &lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt; = ...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; addOne(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;res4: &lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果匿名函数体实现包含多行表达式，可以使用&lt;code&gt;{}&lt;/code&gt;来包围代码，例如：&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; &amp;#123; i: &lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt; =&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         println(&lt;span class=&quot;string&quot;&gt;&quot;hello world&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         i * &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;res0: (&lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt;) =&amp;gt; &lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt; = ...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;请定义匿名函数，实现两个Int型参数相乘的功能，并将该函数赋值给变量 &lt;code&gt;myFunc&lt;/code&gt;。&lt;/p&gt;
&lt;h2 id=&quot;对象定义&quot;&gt;&lt;a href=&quot;#对象定义&quot; class=&quot;headerlink&quot; title=&quot;对象定义&quot;&gt;&lt;/a&gt;对象定义&lt;/h2&gt;&lt;p&gt;Scala支持面向对象编程，使用&lt;code&gt;class&lt;/code&gt;定义一个类，在类定义中使用&lt;code&gt;val&lt;/code&gt;定义成员变量，用&lt;code&gt;def&lt;/code&gt;定义成员方法：&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Calculator&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;keyword&quot;&gt;val&lt;/span&gt; brand: &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&quot;HP&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;add&lt;/span&gt;&lt;/span&gt;(m: &lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt;, n: &lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt;): &lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt; = m + n&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;defined &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Calculator&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;使用&lt;code&gt;new&lt;/code&gt;关键字创建一个对象，使用.调用对象的属性和方法：&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; &lt;span class=&quot;keyword&quot;&gt;val&lt;/span&gt; calc = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;Calculator&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;calc: &lt;span class=&quot;type&quot;&gt;Calculator&lt;/span&gt; = &lt;span class=&quot;type&quot;&gt;Calculator&lt;/span&gt;&lt;span class=&quot;meta&quot;&gt;@e&lt;/span&gt;75a11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; calc.add(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;res1: &lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; calc.brand&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;res2: &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&quot;HP&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;请定义类 Person ，有两个属性 name 和 age ， 分别为String类型和Int类型；一个方法grow，当 grow被调用时，将age加1。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;任性的教授：Martin-Odersky&quot;&gt;&lt;a href=&quot;#任性的教授：Martin-Odersky&quot; class=&quot;headerlink&quot; title=&quot;任性的教授：Martin Odersky&quot;&gt;&lt;/a&gt;任性的教授：Martin Odersky&lt;/h2&gt;&lt;
    
    </summary>
    
      <category term="Notes" scheme="http://n.jourk.com/categories/Notes/"/>
    
    
      <category term="spark" scheme="http://n.jourk.com/tags/spark/"/>
    
  </entry>
  
  <entry>
    <title>Spark-基础教程1-分布并行计算</title>
    <link href="http://n.jourk.com/Notes/Spark/Spark-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B1-%E5%88%86%E5%B8%83%E5%B9%B6%E8%A1%8C%E8%AE%A1%E7%AE%97/"/>
    <id>http://n.jourk.com/Notes/Spark/Spark-基础教程1-分布并行计算/</id>
    <published>2015-06-04T03:24:06.000Z</published>
    <updated>2016-04-22T08:04:47.490Z</updated>
    
    <content type="html">&lt;h2 id=&quot;搬砖-vs-分布式计算&quot;&gt;&lt;a href=&quot;#搬砖-vs-分布式计算&quot; class=&quot;headerlink&quot; title=&quot;搬砖 vs. 分布式计算&quot;&gt;&lt;/a&gt;搬砖 vs. 分布式计算&lt;/h2&gt;&lt;p&gt;一个人搬砖很累，几个人一起搬就会轻松很多，也会快很多。&lt;br&gt;分布并行计算和几个人一起搬砖的意思是一致的，一个资源密集型的任务（搬砖或计算），需要 一组资源（小伙伴或计算节点），并行地完成：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;计算任务 =&amp;gt; 搬砖&lt;/li&gt;
&lt;li&gt;计算节点 =&amp;gt; 小伙伴&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;当计算任务过重时，我们就把计算任务拆分，然后放到多个计算节点上同时执行,这就是分布并行计算。&lt;/p&gt;
&lt;h2 id=&quot;求文件中包含”包租婆”的行数&quot;&gt;&lt;a href=&quot;#求文件中包含”包租婆”的行数&quot; class=&quot;headerlink&quot; title=&quot;求文件中包含”包租婆”的行数&quot;&gt;&lt;/a&gt;求文件中包含”包租婆”的行数&lt;/h2&gt;&lt;p&gt;从一个总计100行的文件中找出所有包含“包租婆”的行数，我们不用太动脑筋就有一个算法：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;读一行，判断这一行有“包租婆”吗？如果有，全局变量count加1。&lt;/li&gt;
&lt;li&gt;文件到末尾了吗？如果没有，跳转到第1步继续执行。&lt;/li&gt;
&lt;li&gt;打印count。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这几步程序，我打赌在你的计算机上可以一眨眼的功夫就执行完。但是如果这个文件有100万行呢？ 如果还用刚才不动脑筋的笨算法，可能就不好交差了……&lt;br&gt;并行分布计算采用了一个大智若愚的办法，通过将笨算法丢给一群机器同时去算，实现规定时间内规定 任务的完成。你要知道，如今流行的Map/Reduce就是这么干的，这听起来不够高端，也确实引起了一些数据库专 家（聪明人）的非议。不过，不管黑猫白猫，能抓住老鼠的都是好猫。&lt;/p&gt;
&lt;h2 id=&quot;Spark简化了分布式计算的开发&quot;&gt;&lt;a href=&quot;#Spark简化了分布式计算的开发&quot; class=&quot;headerlink&quot; title=&quot;Spark简化了分布式计算的开发&quot;&gt;&lt;/a&gt;Spark简化了分布式计算的开发&lt;/h2&gt;&lt;p&gt;如果要把刚才的任务进行分布计算（假设有10台机器可以用），需要对原始的笨算法做一些调整：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;把100万条数据分成10份，每份10万条。&lt;/li&gt;
&lt;li&gt;在10台机器上分别执行笨办法计算包含“包租婆”的行数。&lt;/li&gt;
&lt;li&gt;汇总合并10台机器的计算结果，即count，打印出来。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Oh…NO…..太…累…了…&lt;/p&gt;
&lt;p&gt;好在有Spark的存在！我们只要把数据和计算程序交给Spark，它会机智地进行数据切分、算法复制、分布执行、结果合并。&lt;/p&gt;
&lt;h2 id=&quot;Spark的计算范式：数据集上的计算&quot;&gt;&lt;a href=&quot;#Spark的计算范式：数据集上的计算&quot; class=&quot;headerlink&quot; title=&quot;Spark的计算范式：数据集上的计算&quot;&gt;&lt;/a&gt;Spark的计算范式：数据集上的计算&lt;/h2&gt;&lt;p&gt;Spark用起来的确简单，但有一点特别要注意，你得按照Spark的范式写算法。&lt;br&gt;Spark是在数据集的层次上进行分布并行计算，是的，它只认成堆的数据：&lt;br&gt;我们提交给Spark的计算任务，必须满足两个条件：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;数据是可以分块的，每块构成一个集合。&lt;/li&gt;
&lt;li&gt;算法只能在集合级别执行操作。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;比如，对于文本文件，在Spark中，一行就是一条记录，若干条记录组成一个集合。我们 原来的算法直接在每一行上进行计算，就不行了。需要先构建数据集，然后通过数据集的操作， 实现我们的目的。&lt;/p&gt;
&lt;h2 id=&quot;SQL中的数据集&quot;&gt;&lt;a href=&quot;#SQL中的数据集&quot; class=&quot;headerlink&quot; title=&quot;SQL中的数据集&quot;&gt;&lt;/a&gt;SQL中的数据集&lt;/h2&gt;&lt;p&gt;如果你熟悉SQL，可以用SQL的思维考虑下什么是集合操作：&lt;/p&gt;
&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;UPDATE&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;USER&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;SET&lt;/span&gt; GENDER=&lt;span class=&quot;string&quot;&gt;&#39;FEMALE&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;上面的SQL语句就是一个集合操作，对一个数据集合，执行一条UPDATE操作，整个数据集都被修改了。&lt;br&gt;UPDATE语句有两个特点，这也是集合操作的要素：&lt;/p&gt;
&lt;p&gt;1、对集合的每个记录执行相同的操作&lt;/p&gt;
&lt;p&gt;UPDATE更新了集合中的所有记录，这些记录的 GENDER 字段值都被更新为 FEMALE 。&lt;/p&gt;
&lt;p&gt;2、这个操作的具体行为是用户指定的&lt;/p&gt;
&lt;p&gt;UPDATE通过SET子句，指定更新那些字段，怎么更新。&lt;/p&gt;
&lt;h2 id=&quot;JavaScript中的数据集&quot;&gt;&lt;a href=&quot;#JavaScript中的数据集&quot; class=&quot;headerlink&quot; title=&quot;JavaScript中的数据集&quot;&gt;&lt;/a&gt;JavaScript中的数据集&lt;/h2&gt;&lt;p&gt;JavaScript中数组对象的map方法也是一种集合操作。map方法将一个数组的每一个成员变换为新的成员， 并返回变换后新的集合。&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; a=[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a.map(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;d&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; d*&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(a);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;上面的JavaScript代码对一个数组执行map方法，将每一个成员进行倍乘。结果是获得一个新的 数组，比如在这里，将得到&lt;code&gt;[2,4,6,8]&lt;/code&gt;。&lt;br&gt;这个例子也说明了集合操作的两个要素：&lt;/p&gt;
&lt;p&gt;1、对集合的每个记录执行相同的操作&lt;/p&gt;
&lt;p&gt;在map方法执行中，每个数组成员都被转换为原始值的2倍。&lt;/p&gt;
&lt;p&gt;2、这个操作的具体行为是用户指定的&lt;/p&gt;
&lt;p&gt;map方法使用一个匿名函数，指定如何对每一个原始数据进行变换。&lt;/p&gt;
&lt;h2 id=&quot;将算法移植到Spark上&quot;&gt;&lt;a href=&quot;#将算法移植到Spark上&quot; class=&quot;headerlink&quot; title=&quot;将算法移植到Spark上&quot;&gt;&lt;/a&gt;将算法移植到Spark上&lt;/h2&gt;&lt;p&gt;现在我们修改原始的笨算法，使之适用于Spark：&lt;/p&gt;
&lt;p&gt;将数据载入并构造数据集&lt;/p&gt;
&lt;p&gt;在Spark中，这个数据集被称为&lt;code&gt;RDD&lt;/code&gt; ：&lt;code&gt;弹性分布数据集&lt;/code&gt;。&lt;/p&gt;
&lt;h2 id=&quot;对数据集进行map操作&quot;&gt;&lt;a href=&quot;#对数据集进行map操作&quot; class=&quot;headerlink&quot; title=&quot;对数据集进行map操作&quot;&gt;&lt;/a&gt;对数据集进行map操作&lt;/h2&gt;&lt;p&gt;指定行为：如果一行原始记录包含“包租婆”，该行记录映射为新值1，否则映射为新值0 。&lt;/p&gt;
&lt;p&gt;对map后的数据集进行&lt;code&gt;collect&lt;/code&gt;操作，获得合并的结果。&lt;/p&gt;
&lt;p&gt;上面的map操作，和前面JavaScript数组的map方法类似，将原始记录映射为新的记录，并返回一个&lt;code&gt;新的RDD&lt;/code&gt;。 collect操作提取RDD中的全部数据到本地。&lt;/p&gt;
&lt;p&gt;魔术发生在RDD上。Spark的RDD自动进行数据的切分和结果的整合。我们假装不知道就好了， 就像这一切只发生在本地的一台机器上。&lt;/p&gt;
&lt;h2 id=&quot;Spark操作符&quot;&gt;&lt;a href=&quot;#Spark操作符&quot; class=&quot;headerlink&quot; title=&quot;Spark操作符&quot;&gt;&lt;/a&gt;Spark操作符&lt;/h2&gt;&lt;p&gt;Spark提供了80多种操作符对集合进行操作。我们列举常用的一些供你建立一点基本概念， 以便了解Spark可以支持什么：&lt;/p&gt;
&lt;h3 id=&quot;变换&quot;&gt;&lt;a href=&quot;#变换&quot; class=&quot;headerlink&quot; title=&quot;变换&quot;&gt;&lt;/a&gt;变换&lt;/h3&gt;&lt;p&gt;变换操作总是获得一个新的RDD:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;map(func)&lt;/code&gt; : 将原始数据集的每一个记录使用传入的函数func ，映射为一个新的记录，并返回新的RDD。&lt;br&gt;&lt;code&gt;filter(func)&lt;/code&gt; : 返回一个新的RDD，仅包含那些符合条件的记录，即func返回true 。&lt;br&gt;&lt;code&gt;flatMap(func)&lt;/code&gt; : 和map类似，只是原始记录的一条可能被映射为新的RDD中的多条。&lt;br&gt;&lt;code&gt;union(otherDataset)&lt;/code&gt; : 合并两个RDD，返回一个新的RDD 。&lt;br&gt;&lt;code&gt;intersection(otherDataset)&lt;/code&gt;：返回一个新的RDD，仅包含两个RDD共有的记录。&lt;/p&gt;
&lt;h3 id=&quot;动作&quot;&gt;&lt;a href=&quot;#动作&quot; class=&quot;headerlink&quot; title=&quot;动作&quot;&gt;&lt;/a&gt;动作&lt;/h3&gt;&lt;p&gt;动作操作总是获得一个本地数据，这意味着控制权回到你的程序了:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;reduce(func)&lt;/code&gt; : 使用func对RDD的记录进行聚合。&lt;br&gt;&lt;code&gt;collect()&lt;/code&gt; : 返回RDD中的所有记录&lt;br&gt;&lt;code&gt;count()&lt;/code&gt; : 返回RDD中的记录总数&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;搬砖-vs-分布式计算&quot;&gt;&lt;a href=&quot;#搬砖-vs-分布式计算&quot; class=&quot;headerlink&quot; title=&quot;搬砖 vs. 分布式计算&quot;&gt;&lt;/a&gt;搬砖 vs. 分布式计算&lt;/h2&gt;&lt;p&gt;一个人搬砖很累，几个人一起搬就会轻松很多，也会快很多。&lt;br&gt;分
    
    </summary>
    
      <category term="Notes" scheme="http://n.jourk.com/categories/Notes/"/>
    
    
      <category term="spark" scheme="http://n.jourk.com/tags/spark/"/>
    
  </entry>
  
  <entry>
    <title>Windows-更换密钥方法</title>
    <link href="http://n.jourk.com/System/Windows/Windows-%E6%9B%B4%E6%8D%A2%E5%AF%86%E9%92%A5%E6%96%B9%E6%B3%95/"/>
    <id>http://n.jourk.com/System/Windows/Windows-更换密钥方法/</id>
    <published>2015-06-02T03:27:06.000Z</published>
    <updated>2016-04-23T09:34:08.907Z</updated>
    
    <content type="html">&lt;h1 id=&quot;Windows-更换密钥方法&quot;&gt;&lt;a href=&quot;#Windows-更换密钥方法&quot; class=&quot;headerlink&quot; title=&quot;Windows 更换密钥方法&quot;&gt;&lt;/a&gt;Windows 更换密钥方法&lt;/h1&gt;&lt;h2 id=&quot;修改和替换密钥的几种方法&quot;&gt;&lt;a href=&quot;#修改和替换密钥的几种方法&quot; class=&quot;headerlink&quot; title=&quot;修改和替换密钥的几种方法&quot;&gt;&lt;/a&gt;修改和替换密钥的几种方法&lt;/h2&gt;&lt;h3 id=&quot;更改密钥命令：&quot;&gt;&lt;a href=&quot;#更改密钥命令：&quot; class=&quot;headerlink&quot; title=&quot;更改密钥命令：&quot;&gt;&lt;/a&gt;更改密钥命令：&lt;/h3&gt;&lt;p&gt;&lt;code&gt;Win+x&lt;/code&gt;—命令提示符（以管理员身份）—输入：&lt;code&gt;slmgr /ipk&lt;/code&gt; +序列号（要替换的密钥）–回车即可！或：记事本编写&lt;code&gt;slmgr /ipk +序列号&lt;/code&gt;保存为.bat格式的批处理文件即可！&lt;/p&gt;
&lt;h3 id=&quot;替换密钥命令：&quot;&gt;&lt;a href=&quot;#替换密钥命令：&quot; class=&quot;headerlink&quot; title=&quot;替换密钥命令：&quot;&gt;&lt;/a&gt;替换密钥命令：&lt;/h3&gt;&lt;p&gt;&lt;code&gt;Win+x&lt;/code&gt;—命令提示符（以管理员身份）—输入：&lt;code&gt;slmgr /upk&lt;/code&gt;—回车即可！记事本编写&lt;code&gt;slmgr /upk&lt;/code&gt;保存为.bat格式的批处理文件即可！&lt;/p&gt;
&lt;h3 id=&quot;取消密钥命令：&quot;&gt;&lt;a href=&quot;#取消密钥命令：&quot; class=&quot;headerlink&quot; title=&quot;取消密钥命令：&quot;&gt;&lt;/a&gt;取消密钥命令：&lt;/h3&gt;&lt;p&gt;&lt;code&gt;Win+x&lt;/code&gt;—命令提示符（以管理员身份）—输入：&lt;code&gt;slmgr /ato&lt;/code&gt;—回车即可！记事本编写&lt;code&gt;slmgr /ato&lt;/code&gt;保存为.bat格式的批处理文件即可！&lt;/p&gt;
&lt;h2 id=&quot;找到可以激活的密钥，替换一下即可&quot;&gt;&lt;a href=&quot;#找到可以激活的密钥，替换一下即可&quot; class=&quot;headerlink&quot; title=&quot;找到可以激活的密钥，替换一下即可&quot;&gt;&lt;/a&gt;找到可以激活的密钥，替换一下即可&lt;/h2&gt;&lt;h2 id=&quot;关于：“slmgr”命令的几种用法&quot;&gt;&lt;a href=&quot;#关于：“slmgr”命令的几种用法&quot; class=&quot;headerlink&quot; title=&quot;关于：“slmgr”命令的几种用法&quot;&gt;&lt;/a&gt;关于：“slmgr”命令的几种用法&lt;/h2&gt;&lt;p&gt;1）查看许可证的概要信息（假设为当前许可证；且系统在C盘，下同），则可通过以下两种方式查看。&lt;/p&gt;
&lt;p&gt;运行命令下&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;slmgr.vbs -dli&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;命令提示符命令下&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cscripq C:\windows\system32\slmgr.vbs -dli&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;2）显示许可证激活状态的截止日期，也可通过以下两种方式查看。&lt;/p&gt;
&lt;p&gt;   运行命令下：&lt;code&gt;slmgr.vbs -xpr&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;   命令提示符命令下：&lt;code&gt;cscripq C:\windows\system32\slmgr.vbs -xpr&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;3）查看许可证详细信息，也可通过以下两种方式查看。&lt;/p&gt;
&lt;p&gt;   运行命令下：&lt;code&gt;slmgr.vbs -dlv&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;   命令提示符命令下：&lt;code&gt;cscripq C:\windows\system32\slmgr.vbs -dlv&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;4）导入OEM证书方法&lt;/p&gt;
&lt;p&gt;   运行命令下：&lt;code&gt;slmgr.vbs -ilc D:123.XRM-MS&lt;/code&gt;，后面为OEM证书完整路径&lt;/p&gt;
&lt;p&gt;5）卸载当前产品密钥&lt;/p&gt;
&lt;p&gt;   运行命令下：&lt;code&gt;slmgr.vbs -upk&lt;/code&gt;，即可卸载当前产品密钥，重启计算机会出现输入密钥和联网激活界面。&lt;/p&gt;
&lt;h1 id=&quot;Office-更换密钥方法&quot;&gt;&lt;a href=&quot;#Office-更换密钥方法&quot; class=&quot;headerlink&quot; title=&quot;Office 更换密钥方法&quot;&gt;&lt;/a&gt;Office 更换密钥方法&lt;/h1&gt;&lt;h2 id=&quot;基本操作&quot;&gt;&lt;a href=&quot;#基本操作&quot; class=&quot;headerlink&quot; title=&quot;基本操作&quot;&gt;&lt;/a&gt;基本操作&lt;/h2&gt;&lt;p&gt;管理员身份运行CMD，然后按照以下步骤操作：&lt;/p&gt;
&lt;p&gt;1)定位到Office2013（64位版本）的安装目录：&lt;/p&gt;
&lt;p&gt;32位的操作系统：&lt;code&gt;CD “%PROGRAMFILES%\Microsoft Office\Office15”&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;64位的操作系统：&lt;code&gt;CD “%PROGRAMFILES(x86)%\Microsoft Office\Office15”&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;2)安装产品密钥（取代现有密钥）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cscript ospp.vbs /inpkey:XXXXX-XXXXX-XXXXX-XXXXX-XXXXX&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;3)删除KEY，XXXXX为要删key的最后5位字母：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cscript ospp.vbs /unpkey:XXXXX&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;例1(安装产品密钥，适用于32位操作系统)：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cscript “%PROGRAMFILES%\Microsoft Office\Office15\ospp.vbs” /inpkey:XXXXX-XXXXX-XXXXX-XXXXX-XXXXX&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;例2(安装产品密钥，适用于64位操作系统)：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cscript “%PROGRAMFILES(x86)%\Microsoft Office\Office15\ospp.vbs” /inpkey:XXXXX-XXXXX-XXXXX-XXXXX-XXXXX&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;例3(删除产品密钥，适用于32位操作系统)：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cscript cscript “%PROGRAMFILES%\Microsoft Office\Office15\ospp.vbs” /unpkey:XXXXX&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;例4(删除产品密钥，适用于64位操作系统)：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cscript cscript “%PROGRAMFILES(x86)%\Microsoft Office\Office15\ospp.vbs” /unpkey:XXXXX&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;ospp-vbs命令详解&quot;&gt;&lt;a href=&quot;#ospp-vbs命令详解&quot; class=&quot;headerlink&quot; title=&quot;ospp.vbs命令详解&quot;&gt;&lt;/a&gt;ospp.vbs命令详解&lt;/h2&gt;&lt;p&gt;ospp.vbs文件在哪里？&lt;/p&gt;
&lt;p&gt;该脚本位于%PROGRAMFILES%\Microsoft Office\Office15文件夹中。如果您运行的是32位Office 2013的64位操作系统，该脚本位于%PROGRAMFILES(x86)%\Microsoft Office\Office15文件夹中。&lt;/p&gt;
&lt;p&gt;ospp.vbs命令介绍&lt;/p&gt;
&lt;p&gt;命令有很多，不一一全部介绍了，说说几个激活过程中的常用命令。为了让大家看得更明白，下面我以我虚拟机里的Office 2003 Pro Plus做个演示。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ospp.vbs&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cscript ospp.vbs /dstatus&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;显示当前已安装产品密钥的许可证信息。可以查看到自已安裝的版本有多少个序列号。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ospp.vbs&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cscript ospp.vbs /unpkey:xxxxx&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;卸载已安装的产品密钥。后面的数字是密钥的最后5位数。&lt;/p&gt;
&lt;p&gt;此时再执行&lt;code&gt;cscript ospp.vbs /dstatus&lt;/code&gt;发现产品密钥已经没有了，我重新进行导入。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ospp.vbs&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cscript ospp.vbs /inpkey:xxxxx……&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;安装、替换现有的产品密钥。和上面的过程刚好相反。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cscript ospp.vbs /sethst:x.x.x.x&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;设置KMS主机名。一般为IP地址。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cscript ospp.vbs /act&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;激活当前安装的Office。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cscript ospp.vbs /remhst&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;删除KMS主机名。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Windows-更换密钥方法&quot;&gt;&lt;a href=&quot;#Windows-更换密钥方法&quot; class=&quot;headerlink&quot; title=&quot;Windows 更换密钥方法&quot;&gt;&lt;/a&gt;Windows 更换密钥方法&lt;/h1&gt;&lt;h2 id=&quot;修改和替换密钥的几种方法&quot;&gt;&lt;a 
    
    </summary>
    
      <category term="System" scheme="http://n.jourk.com/categories/System/"/>
    
    
      <category term="windows" scheme="http://n.jourk.com/tags/windows/"/>
    
  </entry>
  
  <entry>
    <title>Spark-自学笔记-Spark集群环境部署搭建</title>
    <link href="http://n.jourk.com/Notes/Spark/Spark-%E8%87%AA%E5%AD%A6%E7%AC%94%E8%AE%B0-Spark%E9%9B%86%E7%BE%A4%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E6%90%AD%E5%BB%BA/"/>
    <id>http://n.jourk.com/Notes/Spark/Spark-自学笔记-Spark集群环境部署搭建/</id>
    <published>2015-05-22T03:24:06.000Z</published>
    <updated>2016-04-23T06:37:17.004Z</updated>
    
    <content type="html">&lt;h2 id=&quot;规划及系统配置&quot;&gt;&lt;a href=&quot;#规划及系统配置&quot; class=&quot;headerlink&quot; title=&quot;规划及系统配置&quot;&gt;&lt;/a&gt;规划及系统配置&lt;/h2&gt;&lt;h3 id=&quot;硬件资源&quot;&gt;&lt;a href=&quot;#硬件资源&quot; class=&quot;headerlink&quot; title=&quot;硬件资源&quot;&gt;&lt;/a&gt;硬件资源&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;192.168.188.131 master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192.168.188.132 slave1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192.168.188.133 slave2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;基本资料&quot;&gt;&lt;a href=&quot;#基本资料&quot; class=&quot;headerlink&quot; title=&quot;基本资料&quot;&gt;&lt;/a&gt;基本资料&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;用户：hadoop&lt;/li&gt;
&lt;li&gt;目录：/home/hadoop/&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;同步时间&quot;&gt;&lt;a href=&quot;#同步时间&quot; class=&quot;headerlink&quot; title=&quot;同步时间&quot;&gt;&lt;/a&gt;同步时间&lt;/h3&gt;&lt;p&gt;root登陆&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ su –&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ntpdate cn.pool.ntp.org&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;修改hostname&quot;&gt;&lt;a href=&quot;#修改hostname&quot; class=&quot;headerlink&quot; title=&quot;修改hostname&quot;&gt;&lt;/a&gt;修改hostname&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ vim /etc/sysconfig/network &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NETWORKING=yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;HOSTNAME=master&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;修改-etc-hosts&quot;&gt;&lt;a href=&quot;#修改-etc-hosts&quot; class=&quot;headerlink&quot; title=&quot;修改/etc/hosts&quot;&gt;&lt;/a&gt;修改/etc/hosts&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ vim /etc/hosts&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192.168.188.131 master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192.168.188.132 slave1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192.168.188.133 slave2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;永久关闭防火墙-非常重要-一定要确认&quot;&gt;&lt;a href=&quot;#永久关闭防火墙-非常重要-一定要确认&quot; class=&quot;headerlink&quot; title=&quot;永久关闭防火墙(非常重要,一定要确认)&quot;&gt;&lt;/a&gt;永久关闭防火墙(非常重要,一定要确认)&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ chkconfig iptables off (永久生效)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ service iptables stop (临时有效)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;7、关闭SELINUX,设置&lt;code&gt;SELINUX=disabled&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ vim /etc/selinux/config&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;安装必要安装包并配置环境变量&quot;&gt;&lt;a href=&quot;#安装必要安装包并配置环境变量&quot; class=&quot;headerlink&quot; title=&quot;安装必要安装包并配置环境变量&quot;&gt;&lt;/a&gt;安装必要安装包并配置环境变量&lt;/h2&gt;&lt;h3 id=&quot;下载安装&quot;&gt;&lt;a href=&quot;#下载安装&quot; class=&quot;headerlink&quot; title=&quot;下载安装&quot;&gt;&lt;/a&gt;下载安装&lt;/h3&gt;&lt;p&gt;下载&lt;code&gt;jdk-7u79-linux-x64.gz&lt;/code&gt;、&lt;code&gt;scala-2.10.5.tgz&lt;/code&gt;、&lt;code&gt;hadoop-2.6.0.tar.gz&lt;/code&gt;（64位）、&lt;code&gt;spark-1.3.1-bin-hadoop2.6.tar&lt;/code&gt;,并分别解压到&lt;code&gt;/usr/local/&lt;/code&gt;重命名为jdk、scala、hadoop、spark。&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ mv hadoop-2.6.0 hadoop &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ mv spark-1.3.1-bin-hadoop2.6 spark&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ mv scala-2.10.5 scala&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ mv jdk1.7.0_79 jdk&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;修改权限&quot;&gt;&lt;a href=&quot;#修改权限&quot; class=&quot;headerlink&quot; title=&quot;修改权限&quot;&gt;&lt;/a&gt;修改权限&lt;/h3&gt;&lt;p&gt;修改用户权限：&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ chown hadoop:hadoop jdk –R&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ chown hadoop:hadoop scala -R&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ chown hadoop:hadoop hadoop –R&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ chown hadoop:hadoop spark –R&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;配置系统环境变量&quot;&gt;&lt;a href=&quot;#配置系统环境变量&quot; class=&quot;headerlink&quot; title=&quot;配置系统环境变量&quot;&gt;&lt;/a&gt;配置系统环境变量&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ vim /etc/profile&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;加入：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#set java environment&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export JAVA_HOME=/usr/local/jdk&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export JRE_HOME=/usr/local/jdk/jre&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export PATH=$JAVA_HOME/bin:$JRE_HOME/bin:$PATH&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#set hadoop&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export HADOOP_HOME=/usr/local/hadoop&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export HADOOP_PID_DIR=/data/hadoop/pids&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export HADOOP_COMMON_LIB_NATIVE_DIR=$HADOOP_HOME/lib/native&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export HADOOP_OPTS=”$HADOOP_OPTS -Djava.library.path=$HADOOP_HOME/lib/native”&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export HADOOP_MAPRED_HOME=$HADOOP_HOME&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export HADOOP_COMMON_HOME=$HADOOP_HOME&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export HADOOP_HDFS_HOME=$HADOOP_HOME&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export YARN_HOME=$HADOOP_HOME&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export HADOOP_CONF_DIR=$HADOOP_HOME/etc/hadoop&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export HDFS_CONF_DIR=$HADOOP_HOME/etc/hadoop&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export YARN_CONF_DIR=$HADOOP_HOME/etc/hadoop&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export JAVA_LIBRARY_PATH=$HADOOP_HOME/lib/native&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export PATH=$PATH:$HADOOP_HOME/bin:$HADOOP_HOME/sbin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#set scala&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export SCALA_HOME=/usr/local/scala&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export PATH=$PATH:$SCALA_HOME/bin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#set spark&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export SPARK_HOME=/usr/local/spark&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export PATH=$PATH:$SPARK_HOME/bins&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;source&lt;/span&gt; /etc/profile&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;规划系统目录&quot;&gt;&lt;a href=&quot;#规划系统目录&quot; class=&quot;headerlink&quot; title=&quot;规划系统目录&quot;&gt;&lt;/a&gt;规划系统目录&lt;/h2&gt;&lt;p&gt;安装目录和数据目录分开,且数据目录和hadoop的用户目录分开,如果需要重新格式化,则可以直接删除所有的数据目录,然后重建数据目录。&lt;/p&gt;
&lt;p&gt;如果数据目录和安装目录或者用户目录放置在一起,则对数据目录操作时,存在误删除程序或者用户文件的风险。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;完整路径&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;/usr/local/hadoop&lt;/td&gt;
&lt;td&gt;hadoop的程序安装主目录&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/data/hadoop/storage/tmp&lt;/td&gt;
&lt;td&gt;临时目录&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/data/hadoop/storage/hdfs/name&lt;/td&gt;
&lt;td&gt;namenode上存储hdfs名字空间元数据&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/data/hadoop/storage/hdfs/data&lt;/td&gt;
&lt;td&gt;datanode上数据块的物理存储位置&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/data/hadoop/storage/mapred/local&lt;/td&gt;
&lt;td&gt;tasktracker上执行mapreduce程序时的本地目录&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/data/hadoop/storage/mapred/system&lt;/td&gt;
&lt;td&gt;这个是hdfs中的目录,存储执行mr程序时的共享文件&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&quot;开始建立目录&quot;&gt;&lt;a href=&quot;#开始建立目录&quot; class=&quot;headerlink&quot; title=&quot;开始建立目录&quot;&gt;&lt;/a&gt;开始建立目录&lt;/h3&gt;&lt;p&gt;在&lt;code&gt;master&lt;/code&gt;下,&lt;code&gt;root&lt;/code&gt;用户&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ mkdir -p /data/hadoop/&amp;#123;pids,storage&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ mkdir -p /data/hadoop/storage/&amp;#123;hdfs,tmp,mapred&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ mkdir -p /data/hadoop/storage/hdfs/&amp;#123;name,data&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ mkdir -p /data/hadoop/storage/mapred/&amp;#123;&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;,system&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ chown -R hadoop:hadoop /data&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;修改拥有着&quot;&gt;&lt;a href=&quot;#修改拥有着&quot; class=&quot;headerlink&quot; title=&quot;修改拥有着&quot;&gt;&lt;/a&gt;修改拥有着&lt;/h3&gt;&lt;p&gt;修改目录&lt;code&gt;/home/hadoop&lt;/code&gt;的拥有者（因为该目录用于安装hadoop,用户对其必须有&lt;code&gt;rwx&lt;/code&gt;权限。）&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ chown -R hadoop:hadoop /home/hadoop&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;Hadoop配置&quot;&gt;&lt;a href=&quot;#Hadoop配置&quot; class=&quot;headerlink&quot; title=&quot;Hadoop配置&quot;&gt;&lt;/a&gt;Hadoop配置&lt;/h2&gt;&lt;h3 id=&quot;配置-hadoop-env-sh、mapred-env-sh、yarn-env-sh&quot;&gt;&lt;a href=&quot;#配置-hadoop-env-sh、mapred-env-sh、yarn-env-sh&quot; class=&quot;headerlink&quot; title=&quot;配置 hadoop-env.sh、mapred-env.sh、yarn-env.sh&quot;&gt;&lt;/a&gt;配置 hadoop-env.sh、mapred-env.sh、yarn-env.sh&lt;/h3&gt;&lt;p&gt;分别修改：&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ vim /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/hadoop/etc/hadoop/hadoop-env.sh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ vim /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/hadoop/etc/hadoop/mapred-env.sh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ vim /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/hadoop/etc/hadoop/yarn-env.sh&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;添加内容：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;export JAVA_HOME=/usr/local/jdk&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export CLASS_PATH=$JAVA_HOME/lib:$JAVA_HOME/jre/lib&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export HADOOP_HOME=/usr/local/hadoop&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export HADOOP_PID_DIR=/data/hadoop/pids&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export HADOOP_COMMON_LIB_NATIVE_DIR=$HADOOP_HOME/lib/native&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export HADOOP_OPTS=”$HADOOP_OPTS -Djava.library.path=$HADOOP_HOME/lib/native”&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export HADOOP_PREFIX=$HADOOP_HOME&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export HADOOP_MAPRED_HOME=$HADOOP_HOME&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export HADOOP_COMMON_HOME=$HADOOP_HOME&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export HADOOP_HDFS_HOME=$HADOOP_HOME&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export YARN_HOME=$HADOOP_HOME&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export HADOOP_CONF_DIR=$HADOOP_HOME/etc/hadoop&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export HDFS_CONF_DIR=$HADOOP_HOME/etc/hadoop&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export YARN_CONF_DIR=$HADOOP_HOME/etc/hadoop&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export JAVA_LIBRARY_PATH=$HADOOP_HOME/lib/native&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export PATH=$PATH:$JAVA_HOME/bin:$HADOOP_HOME/bin:$HADOOP_HOME/sbin&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;core-site-xml&quot;&gt;&lt;a href=&quot;#core-site-xml&quot; class=&quot;headerlink&quot; title=&quot;core-site.xml&quot;&gt;&lt;/a&gt;core-site.xml&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ vim &lt;span class=&quot;variable&quot;&gt;$HADOOP_CONF_DIR&lt;/span&gt;/core-site.xml&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;configuration&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/*默认HDFS路径*/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;fs.defaultFS&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;hdfs://master:9000&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/*缓冲区大小*/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;io.file.buffer.size&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;131072&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/*临时文件夹路径*/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;hadoop.tmp.dir&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;file:/data/hadoop/storage/tmp&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;hadoop.proxyuser.hadoop.hosts&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;*&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;hadoop.proxyuser.hadoop.groups&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;*&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;hadoop.native.lib&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;true&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;configuration&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;hdfs-site-xml&quot;&gt;&lt;a href=&quot;#hdfs-site-xml&quot; class=&quot;headerlink&quot; title=&quot;hdfs-site.xml&quot;&gt;&lt;/a&gt;hdfs-site.xml&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ vim &lt;span class=&quot;variable&quot;&gt;$HADOOP_CONF_DIR&lt;/span&gt;/hdfs-site.xml&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;configuration&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;dfs.namenode.secondary.http-address&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;master:9001&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt; dfs.namenode.name.dir &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;/data/hadoop/storage/hdfs/name&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt; dfs.datanode.data.dir &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;/data/hadoop/storage/hdfs/data&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/*配置副本数*/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;dfs.replication&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;2&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;dfs.webhdfs.enabled&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;true&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;configuration&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;mapred-site-xml&quot;&gt;&lt;a href=&quot;#mapred-site-xml&quot; class=&quot;headerlink&quot; title=&quot;mapred-site.xml&quot;&gt;&lt;/a&gt;mapred-site.xml&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ vim &lt;span class=&quot;variable&quot;&gt;$HADOOP_CONF_DIR&lt;/span&gt;/mapred-site.xml&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;?xml version=”1.0″?&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;?xml-stylesheet type=”text/xsl” href=”configuration.xsl”?&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;configuration&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;mapreduce.cluster.local.dir&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;/data/hadoop/storage/mapred/local&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;mapreduce.cluster.system.dir&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;/data/hadoop/storage/mapred/system&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;mapreduce.framework.name&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;yarn&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;mapreduce.jobhistory.address&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;master:10020&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;mapreduce.jobhistory.webapp.address&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt; master:19888&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;configuration&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;yarn-site-xml&quot;&gt;&lt;a href=&quot;#yarn-site-xml&quot; class=&quot;headerlink&quot; title=&quot;yarn-site.xml&quot;&gt;&lt;/a&gt;yarn-site.xml&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ vim &lt;span class=&quot;variable&quot;&gt;$HADOOP_CONF_DIR&lt;/span&gt;/yarn-site.xml&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;configuration&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;!–&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;Site&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;specific&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;YARN&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;configuration&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;properties&lt;/span&gt; –&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;yarn.nodemanager.aux-services&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;mapreduce_shuffle&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;yarn.nodemanager.aux-services.mapreduce.shuffle.class&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;org.apache.hadoop.mapred.ShuffleHandler&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;yarn.resourcemanager.address&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;master:8032&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;yarn.resourcemanager.scheduler.address&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;master:8030&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;yarn.resourcemanager.resource-tracker.address&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;master:8031&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;yarn.resourcemanager.admin.address&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;master:8033&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;yarn.resourcemanager.webapp.address&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;master:8088&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;configuration&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;配置slaves&quot;&gt;&lt;a href=&quot;#配置slaves&quot; class=&quot;headerlink&quot; title=&quot;配置slaves&quot;&gt;&lt;/a&gt;配置slaves&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ vim &lt;span class=&quot;variable&quot;&gt;$HADOOP_CONF_DIR&lt;/span&gt;/slaves&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;删除localhost,加入所有slave的主机名&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;slave1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;slave2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;Spark配置&quot;&gt;&lt;a href=&quot;#Spark配置&quot; class=&quot;headerlink&quot; title=&quot;Spark配置&quot;&gt;&lt;/a&gt;Spark配置&lt;/h2&gt;&lt;h3 id=&quot;配置spark-env-sh&quot;&gt;&lt;a href=&quot;#配置spark-env-sh&quot; class=&quot;headerlink&quot; title=&quot;配置spark-env.sh&quot;&gt;&lt;/a&gt;配置spark-env.sh&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/spark/conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ mv spark-env.sh.template spark-env.sh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ vim spark-env.sh&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;export JAVA_HOME=/usr/local/jdk&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export SCALA_HOME=/usr/local/scala&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export HADOOP_HOME=/usr/local/hadoop&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export SPARK_WORKER_MEMORY=2g&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export SPARK_MASTER_IP=192.168.188.131&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export MASTER=spark://192.168.188.131:7070&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;配置slaves-1&quot;&gt;&lt;a href=&quot;#配置slaves-1&quot; class=&quot;headerlink&quot; title=&quot;配置slaves&quot;&gt;&lt;/a&gt;配置slaves&lt;/h3&gt;&lt;p&gt;添加&lt;code&gt;worker&lt;/code&gt;节点的主机名列表&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ vim slaves&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;slave1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;slave2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;配置log4j&quot;&gt;&lt;a href=&quot;#配置log4j&quot; class=&quot;headerlink&quot; title=&quot;配置log4j&quot;&gt;&lt;/a&gt;配置log4j&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ mv &lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt;4j.properties.template &lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt;4j.properties&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;集群网络环境介绍及快速部署&quot;&gt;&lt;a href=&quot;#集群网络环境介绍及快速部署&quot; class=&quot;headerlink&quot; title=&quot;集群网络环境介绍及快速部署&quot;&gt;&lt;/a&gt;集群网络环境介绍及快速部署&lt;/h2&gt;&lt;p&gt;集群包含三个节点：&lt;code&gt;1个master&lt;/code&gt;,&lt;code&gt;2个slave&lt;/code&gt;,节点之间局域网连接,可以&lt;code&gt;相互ping通&lt;/code&gt;。&lt;/p&gt;
&lt;h3 id=&quot;拷贝虚拟机文件夹&quot;&gt;&lt;a href=&quot;#拷贝虚拟机文件夹&quot; class=&quot;headerlink&quot; title=&quot;拷贝虚拟机文件夹&quot;&gt;&lt;/a&gt;拷贝虚拟机文件夹&lt;/h3&gt;&lt;p&gt;关闭master虚拟机,把master文件夹,拷贝2份,并命名为&lt;code&gt;slave1&lt;/code&gt;,&lt;code&gt;slave2&lt;/code&gt;。&lt;/p&gt;
&lt;h3 id=&quot;设置虚拟机名称&quot;&gt;&lt;a href=&quot;#设置虚拟机名称&quot; class=&quot;headerlink&quot; title=&quot;设置虚拟机名称&quot;&gt;&lt;/a&gt;设置虚拟机名称&lt;/h3&gt;&lt;p&gt;用VMware打开每个slave,设置其虚拟机的名字&lt;/p&gt;
&lt;p&gt;打开操作系统,当弹出对话框时,选择”我已复制该虚拟机”&lt;/p&gt;
&lt;h3 id=&quot;修改hostname-1&quot;&gt;&lt;a href=&quot;#修改hostname-1&quot; class=&quot;headerlink&quot; title=&quot;修改hostname&quot;&gt;&lt;/a&gt;修改hostname&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ vim /etc/sysconfig/network&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;分别修改为&lt;code&gt;slave1&lt;/code&gt;、&lt;code&gt;slave2&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&quot;Centos克隆后网卡问题&quot;&gt;&lt;a href=&quot;#Centos克隆后网卡问题&quot; class=&quot;headerlink&quot; title=&quot;Centos克隆后网卡问题&quot;&gt;&lt;/a&gt;Centos克隆后网卡问题&lt;/h3&gt;&lt;p&gt;由于克隆原因,克隆出来的虚拟机默认连接eth1网卡,所以需要动手改为&lt;code&gt;eth0&lt;/code&gt;&lt;/p&gt;
&lt;h4 id=&quot;修改-etc-udev-rules-d-70-persistent-net-rules&quot;&gt;&lt;a href=&quot;#修改-etc-udev-rules-d-70-persistent-net-rules&quot; class=&quot;headerlink&quot; title=&quot;修改/etc/udev/rules.d/70-persistent-net.rules&quot;&gt;&lt;/a&gt;修改&lt;code&gt;/etc/udev/rules.d/70-persistent-net.rules&lt;/code&gt;&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;拷贝eth1的硬件地址到eth0&lt;/li&gt;
&lt;li&gt;删除eth1信息&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;配置-etc-sysconfig-network-scripts-ifcfg-eth0&quot;&gt;&lt;a href=&quot;#配置-etc-sysconfig-network-scripts-ifcfg-eth0&quot; class=&quot;headerlink&quot; title=&quot;配置/etc/sysconfig/network-scripts/ifcfg-eth0&quot;&gt;&lt;/a&gt;配置/etc/sysconfig/network-scripts/ifcfg-eth0&lt;/h4&gt;&lt;p&gt;将&lt;code&gt;/etc/udev/rules.d/70-persistent-net.rules&lt;/code&gt;中的&lt;code&gt;ATTR地址&lt;/code&gt;拷贝到本文件的&lt;code&gt;HWADDR&lt;/code&gt;中&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;DEVICE=”eth0″&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BOOTPROTO=”static”&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;HWADDR=”00:0C:29:91:42:2C”&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;MTU=”1500″&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NM_CONTROLLED=”yes”&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ONBOOT=”yes”&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;IPADDR=192.168.152.101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NETMASK=255.255.255.0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GATEWAY=192.168.152.2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;reboot&quot;&gt;&lt;a href=&quot;#reboot&quot; class=&quot;headerlink&quot; title=&quot;reboot&quot;&gt;&lt;/a&gt;reboot&lt;/h4&gt;&lt;h2 id=&quot;拷贝hadoop配置文件&quot;&gt;&lt;a href=&quot;#拷贝hadoop配置文件&quot; class=&quot;headerlink&quot; title=&quot;拷贝hadoop配置文件&quot;&gt;&lt;/a&gt;拷贝hadoop配置文件&lt;/h2&gt;&lt;p&gt;如果配置文件书写错误,可以在namenode上改好之后使用以下命令拷贝到slave1、slave2节点上。&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; target &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; slave1 slave2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;scp -r /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/hadoop/etc/hadoop &lt;span class=&quot;variable&quot;&gt;$target&lt;/span&gt;:/usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/hadoop/etc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;ssh免密码登录&quot;&gt;&lt;a href=&quot;#ssh免密码登录&quot; class=&quot;headerlink&quot; title=&quot;ssh免密码登录&quot;&gt;&lt;/a&gt;ssh免密码登录&lt;/h2&gt;&lt;h3 id=&quot;生成rsa密钥对&quot;&gt;&lt;a href=&quot;#生成rsa密钥对&quot; class=&quot;headerlink&quot; title=&quot;生成rsa密钥对&quot;&gt;&lt;/a&gt;生成rsa密钥对&lt;/h3&gt;&lt;p&gt;所有节点用&lt;code&gt;hadoop用户&lt;/code&gt;登陆&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ su hadoop&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;并执行命令&lt;code&gt;ssh-keygen -t rsa&lt;/code&gt;,这将在&lt;code&gt;/home/hadoop/.ssh/&lt;/code&gt;目录下生成一个私钥&lt;code&gt;id_rsa&lt;/code&gt;和一个公钥&lt;code&gt;id_rsa.pub&lt;/code&gt;。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ ssh-keygen -t rsa&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Generating public/private rsa key pair.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Enter file in which to save the key (/home/ hadoop /.ssh/id_rsa): 默认路径&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Enter passphrase (empty for no passphrase): 回车,空密码&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Enter same passphrase again:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Your identification has been saved in /home/ hadoop /.ssh/id_rsa.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Your public key has been saved in /home/ hadoop /.ssh/id_rsa.pub.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这将在&lt;code&gt;/home/hd_space/.ssh/&lt;/code&gt;目录下生成一个私钥&lt;code&gt;id_rsa&lt;/code&gt;和一个公钥&lt;code&gt;id_rsa.pub&lt;/code&gt;。&lt;/p&gt;
&lt;h3 id=&quot;生成authorized-keys&quot;&gt;&lt;a href=&quot;#生成authorized-keys&quot; class=&quot;headerlink&quot; title=&quot;生成authorized_keys&quot;&gt;&lt;/a&gt;生成authorized_keys&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; /home/hadoop/.ssh/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ cat id_rsa.pub &amp;gt;&amp;gt; authorized_keys&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ chmod 644 authorized_keys&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;将authorized-keys复制到slave&quot;&gt;&lt;a href=&quot;#将authorized-keys复制到slave&quot; class=&quot;headerlink&quot; title=&quot;将authorized_keys复制到slave&quot;&gt;&lt;/a&gt;将&lt;code&gt;authorized_keys&lt;/code&gt;复制到&lt;code&gt;slave&lt;/code&gt;&lt;/h3&gt;&lt;p&gt;使用SSH协议将master的公钥信息&lt;code&gt;authorized_keys&lt;/code&gt;复制到所有slave的&lt;code&gt;.ssh&lt;/code&gt;目录下。&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ scp authorized_keys data节点ip地址:/home/hd_space/.ssh&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ scp authorized_keys hadoop@slave1:/home/hadoop/.ssh/authorized_keys&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ scp authorized_keys hadoop@slave2:/home/hadoop/.ssh/authorized_keys&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;使用ssh命令测试是否成功&quot;&gt;&lt;a href=&quot;#使用ssh命令测试是否成功&quot; class=&quot;headerlink&quot; title=&quot;使用ssh命令测试是否成功&quot;&gt;&lt;/a&gt;使用ssh命令测试是否成功&lt;/h3&gt;&lt;p&gt;配置完毕,在master上执行&lt;code&gt;ssh slave,所有数据节点&lt;/code&gt;命令,因为ssh执行一次之后将不会再询问。在各个slave上也进行&lt;code&gt;ssh master&lt;/code&gt;命令。&lt;/p&gt;
&lt;h2 id=&quot;Hadoop集群启动&quot;&gt;&lt;a href=&quot;#Hadoop集群启动&quot; class=&quot;headerlink&quot; title=&quot;Hadoop集群启动&quot;&gt;&lt;/a&gt;Hadoop集群启动&lt;/h2&gt;&lt;h3 id=&quot;格式化&quot;&gt;&lt;a href=&quot;#格式化&quot; class=&quot;headerlink&quot; title=&quot;格式化&quot;&gt;&lt;/a&gt;格式化&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hadoop namenode -format&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;注：因为配置了环境变量,此处不需要输入hadoop命令的全路径/hadoop/bin/hadoop&lt;/p&gt;
&lt;p&gt;执行后的结果中会提示&lt;code&gt;dfs/namehas been successfully formatted&lt;/code&gt;。否则格式化失败。&lt;/p&gt;
&lt;h3 id=&quot;启动hadoop&quot;&gt;&lt;a href=&quot;#启动hadoop&quot; class=&quot;headerlink&quot; title=&quot;启动hadoop&quot;&gt;&lt;/a&gt;启动hadoop&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ start-dfs.sh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ start-yarn.sh&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;启动成功后,分别在master和slave所在机器上使用&lt;code&gt;jps&lt;/code&gt;命令查看&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;会在namenode机器上看到&lt;code&gt;namenode&lt;/code&gt;,&lt;code&gt;secondaryNamenode&lt;/code&gt;,&lt;code&gt;ResourceManager&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;会在slave1所在机器上看到&lt;code&gt;DataNode&lt;/code&gt;, &lt;code&gt;NodeManager&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;会在slave2所在机器上看到&lt;code&gt;DataNode&lt;/code&gt;,&lt;code&gt;NodeManager&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;否则启动失败,检查配置是否有问题。&lt;/p&gt;
&lt;h3 id=&quot;查看集群状态&quot;&gt;&lt;a href=&quot;#查看集群状态&quot; class=&quot;headerlink&quot; title=&quot;查看集群状态&quot;&gt;&lt;/a&gt;查看集群状态&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hdfs dfsadmin -report&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;停止hadoop&quot;&gt;&lt;a href=&quot;#停止hadoop&quot; class=&quot;headerlink&quot; title=&quot;停止hadoop&quot;&gt;&lt;/a&gt;停止hadoop&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ ./sbin/stop-dfs.sh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ./sbin/stop-yarn.sh&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;查看HDFS&quot;&gt;&lt;a href=&quot;#查看HDFS&quot; class=&quot;headerlink&quot; title=&quot;查看HDFS&quot;&gt;&lt;/a&gt;查看HDFS&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;http://192.168.188.132:50070/dfshealth.jsp&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://192.168.188.132:50070/dfshealth.jsp&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;Spark集群启动&quot;&gt;&lt;a href=&quot;#Spark集群启动&quot; class=&quot;headerlink&quot; title=&quot;Spark集群启动&quot;&gt;&lt;/a&gt;Spark集群启动&lt;/h2&gt;&lt;h3 id=&quot;启动Spark&quot;&gt;&lt;a href=&quot;#启动Spark&quot; class=&quot;headerlink&quot; title=&quot;启动Spark&quot;&gt;&lt;/a&gt;启动Spark&lt;/h3&gt;&lt;p&gt;在&lt;code&gt;Master&lt;/code&gt;节点上执行&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/spark &amp;amp;&amp;amp; ./sbin/start-all.sh&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;检查进程是否启动&quot;&gt;&lt;a href=&quot;#检查进程是否启动&quot; class=&quot;headerlink&quot; title=&quot;检查进程是否启动&quot;&gt;&lt;/a&gt;检查进程是否启动&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ jps&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在master节点上出现&lt;code&gt;Master&lt;/code&gt;,在slave节点上出现&lt;code&gt;Worker&lt;/code&gt;.&lt;/p&gt;
&lt;h3 id=&quot;相关测试&quot;&gt;&lt;a href=&quot;#相关测试&quot; class=&quot;headerlink&quot; title=&quot;相关测试&quot;&gt;&lt;/a&gt;相关测试&lt;/h3&gt;&lt;p&gt;访问监控页面URL&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;规划及系统配置&quot;&gt;&lt;a href=&quot;#规划及系统配置&quot; class=&quot;headerlink&quot; title=&quot;规划及系统配置&quot;&gt;&lt;/a&gt;规划及系统配置&lt;/h2&gt;&lt;h3 id=&quot;硬件资源&quot;&gt;&lt;a href=&quot;#硬件资源&quot; class=&quot;headerlink&quot; titl
    
    </summary>
    
      <category term="Notes" scheme="http://n.jourk.com/categories/Notes/"/>
    
    
      <category term="spark" scheme="http://n.jourk.com/tags/spark/"/>
    
  </entry>
  
  <entry>
    <title>Linux-CentOS-学习-基础命令</title>
    <link href="http://n.jourk.com/Notes/Linux/Linux-CentOS-%E5%AD%A6%E4%B9%A0-%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/"/>
    <id>http://n.jourk.com/Notes/Linux/Linux-CentOS-学习-基础命令/</id>
    <published>2014-09-12T03:27:06.000Z</published>
    <updated>2016-04-23T08:02:13.175Z</updated>
    
    <content type="html">&lt;h2 id=&quot;日期时间&quot;&gt;&lt;a href=&quot;#日期时间&quot; class=&quot;headerlink&quot; title=&quot;日期时间&quot;&gt;&lt;/a&gt;日期时间&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;命令&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;date&lt;/td&gt;
&lt;td&gt;查看、设置当前系统时间&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;+%Y–%m–%d&lt;/td&gt;
&lt;td&gt;格式化显示日期&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;date -u&lt;/td&gt;
&lt;td&gt;显示UTC时间&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;date -s&lt;/td&gt;
&lt;td&gt;修改系统时间&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;hwclock（clock）&lt;/td&gt;
&lt;td&gt;显示硬件时钟时间&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;cal&lt;/td&gt;
&lt;td&gt;查看日历&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;uptime&lt;/td&gt;
&lt;td&gt;查看系统运行时间&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&quot;输出、查看命令&quot;&gt;&lt;a href=&quot;#输出、查看命令&quot; class=&quot;headerlink&quot; title=&quot;输出、查看命令&quot;&gt;&lt;/a&gt;输出、查看命令&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;命令&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;echo&lt;/td&gt;
&lt;td&gt;显示输入的内容&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;cat&lt;/td&gt;
&lt;td&gt;显示文件内容&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;head&lt;/td&gt;
&lt;td&gt;显示文件的头几行(默认10行)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-n&lt;/td&gt;
&lt;td&gt;指定显示的行数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;tail&lt;/td&gt;
&lt;td&gt;显示文件的末尾几行(默认10行)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-n&lt;/td&gt;
&lt;td&gt;指定显示的行数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-f&lt;/td&gt;
&lt;td&gt;追踪显示文件更新(一般用于查看日志,命令不会退出,而是持续显示新加入的内容)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;more&lt;/td&gt;
&lt;td&gt;用于翻页显示文件内容(只能向下翻)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;less&lt;/td&gt;
&lt;td&gt;用于翻页显示文件内容(可上下翻)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&quot;查看硬件信息&quot;&gt;&lt;a href=&quot;#查看硬件信息&quot; class=&quot;headerlink&quot; title=&quot;查看硬件信息&quot;&gt;&lt;/a&gt;查看硬件信息&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;命令&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;lspci&lt;/td&gt;
&lt;td&gt;查看PCI设备&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-v&lt;/td&gt;
&lt;td&gt;查看详细信息&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;lsusb&lt;/td&gt;
&lt;td&gt;查看USB设备&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-v&lt;/td&gt;
&lt;td&gt;查看详细信息&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;lsmod&lt;/td&gt;
&lt;td&gt;查看加载的模块(驱动)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;4、关机、重启&lt;/p&gt;
&lt;p&gt;&lt;code&gt;shutdown&lt;/code&gt;命令可以关闭、重启计算机。&lt;/p&gt;
&lt;p&gt;shutdown [-h|-r] 时间&lt;/p&gt;
&lt;p&gt;  -h 关闭计算机&lt;br&gt;  -r 重新启动&lt;/p&gt;
&lt;p&gt;如：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;命令&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;shutdown -h now&lt;/td&gt;
&lt;td&gt;立即关机&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;shutdown -h +10&lt;/td&gt;
&lt;td&gt;10分钟后关机&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;shutdown -h 23:30&lt;/td&gt;
&lt;td&gt;晚上十一点半关机&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;shutdown -r now&lt;/td&gt;
&lt;td&gt;立即重启&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;poweroff&lt;/td&gt;
&lt;td&gt;立即关闭计算机&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;reboot&lt;/td&gt;
&lt;td&gt;立即重启计算机&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&quot;归档、压缩&quot;&gt;&lt;a href=&quot;#归档、压缩&quot; class=&quot;headerlink&quot; title=&quot;归档、压缩&quot;&gt;&lt;/a&gt;归档、压缩&lt;/h2&gt;&lt;h3 id=&quot;zip命令可以压缩文件。&quot;&gt;&lt;a href=&quot;#zip命令可以压缩文件。&quot; class=&quot;headerlink&quot; title=&quot;zip命令可以压缩文件。&quot;&gt;&lt;/a&gt;zip命令可以压缩文件。&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;zip filename.zip file1 fiel2 …&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;命令&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;th&gt;Example&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;unzip&lt;/td&gt;
&lt;td&gt;解压缩zip文件&lt;/td&gt;
&lt;td&gt;unzip filename.zip&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;gzip&lt;/td&gt;
&lt;td&gt;压缩文件&lt;/td&gt;
&lt;td&gt;gzip filename&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&quot;tar命令可以归档文件&quot;&gt;&lt;a href=&quot;#tar命令可以归档文件&quot; class=&quot;headerlink&quot; title=&quot;tar命令可以归档文件&quot;&gt;&lt;/a&gt;tar命令可以归档文件&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;tar -cvf out.tar file1 file2 …&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tar -xvf filename.tar&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tar -cvzf out.tar.gz file file1 …&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;-z 参数将归档后的归档文件进行gzip压缩以减少大小&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;查找&quot;&gt;&lt;a href=&quot;#查找&quot; class=&quot;headerlink&quot; title=&quot;查找&quot;&gt;&lt;/a&gt;查找&lt;/h2&gt;&lt;p&gt;&lt;code&gt;locate&lt;/code&gt;命令快速查找文件、文件夹&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;locate keyword&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;此命令需预先建立数据库，数据库默认每天更新一次，可以使用”updatedb“命令手工建立、更新数据库&lt;/p&gt;
&lt;h3 id=&quot;find命令可以高级查找文件、文件夹&quot;&gt;&lt;a href=&quot;#find命令可以高级查找文件、文件夹&quot; class=&quot;headerlink&quot; title=&quot;find命令可以高级查找文件、文件夹&quot;&gt;&lt;/a&gt;find命令可以高级查找文件、文件夹&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;命令&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;find . -name &lt;em&gt;keyword&lt;/em&gt;&lt;/td&gt;
&lt;td&gt;在当前目录查找文件名中包含”keyword”的文件&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;find / -name *.conf&lt;/td&gt;
&lt;td&gt;在根目录中查找文件名以”.conf”结尾的文件&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;find / -perm 777&lt;/td&gt;
&lt;td&gt;在根目录中查找权限为”777″的文件&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;find / -type d&lt;/td&gt;
&lt;td&gt;在根目录中查找类型为”d”(目录)的文件&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;find . -name “a*” -exec ls -l {}&lt;/td&gt;
&lt;td&gt;立即重启&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&quot;FIND查找条件&quot;&gt;&lt;a href=&quot;#FIND查找条件&quot; class=&quot;headerlink&quot; title=&quot;FIND查找条件&quot;&gt;&lt;/a&gt;FIND查找条件&lt;/h2&gt;&lt;p&gt;&lt;code&gt;find&lt;/code&gt;支持很多种查找条件,常用的如下：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;属性&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;-name&lt;/td&gt;
&lt;td&gt;按名称查找&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-perm&lt;/td&gt;
&lt;td&gt;按权限查找&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-user&lt;/td&gt;
&lt;td&gt;按所有者查找&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-group&lt;/td&gt;
&lt;td&gt;按所属用户组查找&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-ctime&lt;/td&gt;
&lt;td&gt;按创建时间查找&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-type&lt;/td&gt;
&lt;td&gt;按文件类型查找&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-size&lt;/td&gt;
&lt;td&gt;按文件大小查找&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;日期时间&quot;&gt;&lt;a href=&quot;#日期时间&quot; class=&quot;headerlink&quot; title=&quot;日期时间&quot;&gt;&lt;/a&gt;日期时间&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;命令&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbod
    
    </summary>
    
      <category term="Notes" scheme="http://n.jourk.com/categories/Notes/"/>
    
    
      <category term="linux" scheme="http://n.jourk.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>Linux-CentOS-学习-文件系统基本结构及操作</title>
    <link href="http://n.jourk.com/Notes/Linux/Linux-CentOS-%E5%AD%A6%E4%B9%A0-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84%E5%8F%8A%E6%93%8D%E4%BD%9C/"/>
    <id>http://n.jourk.com/Notes/Linux/Linux-CentOS-学习-文件系统基本结构及操作/</id>
    <published>2014-09-11T03:27:06.000Z</published>
    <updated>2016-04-23T09:36:48.884Z</updated>
    
    <content type="html">&lt;h2 id=&quot;目录结构&quot;&gt;&lt;a href=&quot;#目录结构&quot; class=&quot;headerlink&quot; title=&quot;目录结构&quot;&gt;&lt;/a&gt;目录结构&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;http://7xssec.com2.z0.glb.clouddn.com/notes-linux-catalog-1.jpg&quot; alt=&quot;目录结构&quot;&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;目录&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;/dev&lt;/td&gt;
&lt;td&gt;存放设备抽象文件&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/lib&lt;/td&gt;
&lt;td&gt;存放系统库文件&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/sbin&lt;/td&gt;
&lt;td&gt;存放特权级二进制文件&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/var&lt;/td&gt;
&lt;td&gt;一般存放经常变化的数据&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/home&lt;/td&gt;
&lt;td&gt;用户家目录&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/etc&lt;/td&gt;
&lt;td&gt;配置文件存放目录&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/media&lt;/td&gt;
&lt;td&gt;自动挂载设备目录&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/lost+found&lt;/td&gt;
&lt;td&gt;ext系统文件&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/srv&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/tmp&lt;/td&gt;
&lt;td&gt;临时文件目录(系统会自动删除其中的文件)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/boot&lt;/td&gt;
&lt;td&gt;存放内核与启动程序相关文件&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/bin&lt;/td&gt;
&lt;td&gt;存放二进制文件（可执行命令）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/usr&lt;/td&gt;
&lt;td&gt;一般存放安装程序&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/proc&lt;/td&gt;
&lt;td&gt;内存中的实时信息(虚拟目录)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/root&lt;/td&gt;
&lt;td&gt;特权用户（root）家目录&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/opt&lt;/td&gt;
&lt;td&gt;大型软件存放目录（非强制）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/mnt&lt;/td&gt;
&lt;td&gt;正常文件挂载目录&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/selinux&lt;/td&gt;
&lt;td&gt;安全机制相关文件&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/sys&lt;/td&gt;
&lt;td&gt;系统底层信息目录&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;每个shell或系统进程都有一个当前工作目录&lt;/li&gt;
&lt;li&gt;使用pwd命令可以显示当前的工作目录&lt;/li&gt;
&lt;li&gt;通过touch命令可以创建一个空白文件或者更新已有文件的时间&lt;/li&gt;
&lt;li&gt;以”.”开头的文件为隐藏文件&lt;/li&gt;
&lt;li&gt;通过”file”命令可以查看文件类型&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;ls命令用来列出目录内容&quot;&gt;&lt;a href=&quot;#ls命令用来列出目录内容&quot; class=&quot;headerlink&quot; title=&quot;ls命令用来列出目录内容&quot;&gt;&lt;/a&gt;&lt;code&gt;ls&lt;/code&gt;命令用来列出目录内容&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;命令&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;ls -a&lt;/td&gt;
&lt;td&gt;显示所有文件（包括隐藏文件）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ls -l&lt;/td&gt;
&lt;td&gt;显示详细信息&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ls -R&lt;/td&gt;
&lt;td&gt;递归显示子目录结构&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ls -ld&lt;/td&gt;
&lt;td&gt;显示目录和链接信息&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&quot;使用cd命令切换目录&quot;&gt;&lt;a href=&quot;#使用cd命令切换目录&quot; class=&quot;headerlink&quot; title=&quot;使用cd命令切换目录&quot;&gt;&lt;/a&gt;使用&lt;code&gt;cd&lt;/code&gt;命令切换目录&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;命令&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;cd ..&lt;/td&gt;
&lt;td&gt;切换到上一级目录&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;cd .&lt;/td&gt;
&lt;td&gt;切换到当前目录&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;cd ~&lt;/td&gt;
&lt;td&gt;切换到用户”home”目录（/home/user)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;cd –&lt;/td&gt;
&lt;td&gt;切换到上一个工作目录&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&quot;使用cp命令复制文件或目录&quot;&gt;&lt;a href=&quot;#使用cp命令复制文件或目录&quot; class=&quot;headerlink&quot; title=&quot;使用cp命令复制文件或目录&quot;&gt;&lt;/a&gt;使用&lt;code&gt;cp&lt;/code&gt;命令复制文件或目录&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;命令&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;cp&lt;/td&gt;
&lt;td&gt;源文件(文件夹) 目标文件(文件夹)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-r&lt;/td&gt;
&lt;td&gt;递归复制整个目录树&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-v&lt;/td&gt;
&lt;td&gt;显示详细信息&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&quot;通过mv命令移动或者重命名文件或目录&quot;&gt;&lt;a href=&quot;#通过mv命令移动或者重命名文件或目录&quot; class=&quot;headerlink&quot; title=&quot;通过mv命令移动或者重命名文件或目录&quot;&gt;&lt;/a&gt;通过&lt;code&gt;mv&lt;/code&gt;命令移动或者重命名文件或目录&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mv 文件(文件夹) 目标目录&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果指定文件名，则可以重命名文件&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mv 文件 新文件名&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;使用rm命令可以删除文件或目录&quot;&gt;&lt;a href=&quot;#使用rm命令可以删除文件或目录&quot; class=&quot;headerlink&quot; title=&quot;使用rm命令可以删除文件或目录&quot;&gt;&lt;/a&gt;使用&lt;code&gt;rm&lt;/code&gt;命令可以删除文件或目录&lt;/h2&gt;&lt;p&gt;常用参数&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;参数&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;-i&lt;/td&gt;
&lt;td&gt;交互式（删除之前需确认）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-r&lt;/td&gt;
&lt;td&gt;递归的删除包括目录中的所有内容&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-f&lt;/td&gt;
&lt;td&gt;强制删除，没有警告提示（使用时需十分谨慎）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-v&lt;/td&gt;
&lt;td&gt;显示详细信息&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;通过&lt;code&gt;mkdir&lt;/code&gt;命令创建一个目录&lt;/li&gt;
&lt;li&gt;通过&lt;code&gt;rmdir&lt;/code&gt;命令删除一个空目录&lt;/li&gt;
&lt;li&gt;通过&lt;code&gt;rm -r[f]&lt;/code&gt;命令删除一个非空目录&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;目录结构&quot;&gt;&lt;a href=&quot;#目录结构&quot; class=&quot;headerlink&quot; title=&quot;目录结构&quot;&gt;&lt;/a&gt;目录结构&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;http://7xssec.com2.z0.glb.clouddn.com/notes-linux-ca
    
    </summary>
    
      <category term="Notes" scheme="http://n.jourk.com/categories/Notes/"/>
    
    
      <category term="linux" scheme="http://n.jourk.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>Linux-CentOS-学习-Bash命令</title>
    <link href="http://n.jourk.com/Notes/Linux/Linux-CentOS-%E5%AD%A6%E4%B9%A0-Bash%E5%91%BD%E4%BB%A4/"/>
    <id>http://n.jourk.com/Notes/Linux/Linux-CentOS-学习-Bash命令/</id>
    <published>2014-09-10T03:27:06.000Z</published>
    <updated>2016-04-16T16:44:28.833Z</updated>
    
    <content type="html">&lt;h2 id=&quot;1、提示符&quot;&gt;&lt;a href=&quot;#1、提示符&quot; class=&quot;headerlink&quot; title=&quot;1、提示符:&quot;&gt;&lt;/a&gt;1、提示符:&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;#、$&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;命令一般由三个部分组成:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;命令 选项 参数&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;2、常用命令&quot;&gt;&lt;a href=&quot;#2、常用命令&quot; class=&quot;headerlink&quot; title=&quot;2、常用命令&quot;&gt;&lt;/a&gt;2、常用命令&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;命令&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;注释&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;su&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;切换到root权限&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;su –&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;切换到root用户&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;exit&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;退出用户登录&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;hostname&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;显示主机名&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ls&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;列出文件清单&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;uname&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;显示系统名称&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;uname -a&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;完整的系统名&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;uname –all&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;同上（无差别）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Ctrl+c&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;终止当前进程&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;命令 &amp;amp;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;在后台执行此命令&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&quot;3、历史命令：&quot;&gt;&lt;a href=&quot;#3、历史命令：&quot; class=&quot;headerlink&quot; title=&quot;3、历史命令：&quot;&gt;&lt;/a&gt;3、历史命令：&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;命令&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;注释&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;History&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;查看历史记录&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;!!&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;重复前一个命令&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;!**&lt;/strong&gt;字符**&lt;/td&gt;
&lt;td&gt;重复前一个以”字符”开头的命令&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;!num&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;按照历史记录的序号执行命令&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;!?abc&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;重复之前包含”abc”的命令&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;!-n&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;重复倒数第n个命令&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Ctrl+r&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;在历史记录中搜索命令&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Esc+.&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;按Esc后按.重新调用前一个命令中的参数&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&quot;4、通配符&quot;&gt;&lt;a href=&quot;#4、通配符&quot; class=&quot;headerlink&quot; title=&quot;4、通配符&quot;&gt;&lt;/a&gt;4、通配符&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;命令&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;注释&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;*&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;匹配零个或多个&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;?&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;匹配任意一个字符&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;[0-9]&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;匹配一个数字范围&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;[abc]&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;匹配列表里任何字符&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;[^abd]&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;匹配列表以外字符&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&quot;5、用户信息&quot;&gt;&lt;a href=&quot;#5、用户信息&quot; class=&quot;headerlink&quot; title=&quot;5、用户信息&quot;&gt;&lt;/a&gt;5、用户信息&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;命令&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;注释&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;su –&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;切换到root用户并使用一个新的运行环境&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;sudo&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;使用管理员身份运行命令&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;id&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;显示当前用户信息&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Passwd&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;修改当前用户密码&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;su –**&lt;/strong&gt;用户**&lt;/td&gt;
&lt;td&gt;切换到”用户”账号&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;logout&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;退出当前shell&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;exit&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;退出当前账号身份&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&quot;6、管理后台作业&quot;&gt;&lt;a href=&quot;#6、管理后台作业&quot; class=&quot;headerlink&quot; title=&quot;6、管理后台作业&quot;&gt;&lt;/a&gt;6、管理后台作业&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;命令&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;注释&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;在命令后加&amp;amp;**&lt;/strong&gt;符号**&lt;/td&gt;
&lt;td&gt;在后台运行进程&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Ctrl+z&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;暂停某个程序&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;jobs&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;查看后台作业列表&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;bg 1&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;继续执行后台任务1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;fg 1&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;将后台任务调1到前台运行&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;1、提示符&quot;&gt;&lt;a href=&quot;#1、提示符&quot; class=&quot;headerlink&quot; title=&quot;1、提示符:&quot;&gt;&lt;/a&gt;1、提示符:&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;#、$&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;命令一般由三个部分组成:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;
    
    </summary>
    
      <category term="Notes" scheme="http://n.jourk.com/categories/Notes/"/>
    
    
      <category term="linux" scheme="http://n.jourk.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>Java-解析Java中文乱码</title>
    <link href="http://n.jourk.com/Notes/Java/Java-%E8%A7%A3%E6%9E%90Java%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81%E7%9A%84%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95/"/>
    <id>http://n.jourk.com/Notes/Java/Java-解析Java中文乱码的处理方法/</id>
    <published>2014-09-04T22:27:06.000Z</published>
    <updated>2016-04-16T14:36:17.718Z</updated>
    
    <content type="html">&lt;blockquote&gt;
&lt;p&gt;有关乱码的处理－－中国程序员永远无法避免的话题&lt;/p&gt;
&lt;h2 id=&quot;常见解决办法&quot;&gt;&lt;a href=&quot;#常见解决办法&quot; class=&quot;headerlink&quot; title=&quot;常见解决办法&quot;&gt;&lt;/a&gt;常见解决办法&lt;/h2&gt;&lt;/blockquote&gt;
&lt;p&gt;对于Java由于默认的编码方式是 UNICODE,所以用中文也易出问题,常见的解决是&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;String s2 = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; String(s1.getBytes(&lt;span class=&quot;string&quot;&gt;&quot;ISO-8859-1&quot;&lt;/span&gt;),&lt;span class=&quot;string&quot;&gt;&quot;GBK&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;utf8解决JSP中文乱码问题&quot;&gt;&lt;a href=&quot;#utf8解决JSP中文乱码问题&quot; class=&quot;headerlink&quot; title=&quot;utf8解决JSP中文乱码问题&quot;&gt;&lt;/a&gt;utf8解决JSP中文乱码问题&lt;/h2&gt;&lt;p&gt;一般说来在每个页面的开始处，加入：&lt;br&gt;&lt;figure class=&quot;highlight jsp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;%@ page language=&lt;span class=&quot;string&quot;&gt;&quot;java&quot;&lt;/span&gt; contentType=&lt;span class=&quot;string&quot;&gt;&quot;text/html; charset=UTF-8&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     pageEncoding=&lt;span class=&quot;string&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;%&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;%&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; request.setCharacterEncoding(&lt;span class=&quot;string&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;%&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;charset=UTF-8  的作用是指定JSP向客户端输出的编码方式为“UTF-8”&lt;br&gt;pageEncoding=”UTF-8″  为了让JSP引擎能正确地解码含有中文字符的JSP页面，这在LINUX中很有效&lt;br&gt;request.setCharacterEncoding(“UTF-8”); 是对请求进行了中文编码&lt;br&gt;有时，这样仍不能解决问题，还需要这样处理一下：&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;String msg = request.getParameter(&lt;span class=&quot;string&quot;&gt;&quot;message&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;String str=&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; String(msg.getBytes(&lt;span class=&quot;string&quot;&gt;&quot;ISO-8859-1&quot;&lt;/span&gt;),&lt;span class=&quot;string&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;out.println(st);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;Tomcat-5-5-中文乱码&quot;&gt;&lt;a href=&quot;#Tomcat-5-5-中文乱码&quot; class=&quot;headerlink&quot; title=&quot;Tomcat 5.5 中文乱码&quot;&gt;&lt;/a&gt;Tomcat 5.5 中文乱码&lt;/h2&gt;&lt;h3 id=&quot;1、修改配置文件&quot;&gt;&lt;a href=&quot;#1、修改配置文件&quot; class=&quot;headerlink&quot; title=&quot;1、修改配置文件&quot;&gt;&lt;/a&gt;1、修改配置文件&lt;/h3&gt;&lt;p&gt;1)只要把%TOMCAT安装目录%webapps/servlets-examples/WEB-INF/classes/filters/SetCharacterEncodingFilter.class文件拷到你的webapp目录/filters下，如果没有filters目录，就创建一个。&lt;/p&gt;
&lt;p&gt;2)在你的web.xml里加入如下几行：&lt;br&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;filter&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;filter-name&lt;/span&gt;&amp;gt;&lt;/span&gt;Set   Character   Encoding&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;filter-name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;filter-class&lt;/span&gt;&amp;gt;&lt;/span&gt;filters.SetCharacterEncodingFilter&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;filter-class&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;init-param&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;param-name&lt;/span&gt;&amp;gt;&lt;/span&gt;encoding&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;param-name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;param-value&lt;/span&gt;&amp;gt;&lt;/span&gt;GBK&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;param-value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;init-param&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;filter&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;filter-mapping&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;filter-name&lt;/span&gt;&amp;gt;&lt;/span&gt;Set   Character   Encoding&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;filter-name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;url-pattern&lt;/span&gt;&amp;gt;&lt;/span&gt;/*&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;url-pattern&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;filter-mapping&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;3)完成.&lt;/p&gt;
&lt;h3 id=&quot;2、get方式的解决办法&quot;&gt;&lt;a href=&quot;#2、get方式的解决办法&quot; class=&quot;headerlink&quot; title=&quot;2、get方式的解决办法&quot;&gt;&lt;/a&gt;2、get方式的解决办法&lt;/h3&gt;&lt;p&gt;1) 打开tomcat的server.xml文件，找到区块，加入如下一行：&lt;br&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;URIEncoding=&quot;GBK&quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;完整的应如下：&lt;br&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;Connector&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;port&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;80&quot;&lt;/span&gt;   &lt;span class=&quot;attr&quot;&gt;maxThreads&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;150&quot;&lt;/span&gt;   &lt;span class=&quot;attr&quot;&gt;minSpareThreads&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;25&quot;&lt;/span&gt;   &lt;span class=&quot;attr&quot;&gt;maxSpareThreads&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;75&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;enableLookups&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;false&quot;&lt;/span&gt;   &lt;span class=&quot;attr&quot;&gt;redirectPort&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;8443&quot;&lt;/span&gt;   &lt;span class=&quot;attr&quot;&gt;acceptCount&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;100&quot;&lt;/span&gt;   &lt;span class=&quot;attr&quot;&gt;debug&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;0&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;onnectionTimeout&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;20000&quot;&lt;/span&gt;  &lt;span class=&quot;attr&quot;&gt;disableUploadTimeout&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;true&quot;&lt;/span&gt;  &lt;span class=&quot;attr&quot;&gt;URIEncoding&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;GBK&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;2) 重启tomcat,一切OK。&lt;/p&gt;
&lt;h2 id=&quot;xmlHttpRequest中文问题&quot;&gt;&lt;a href=&quot;#xmlHttpRequest中文问题&quot; class=&quot;headerlink&quot; title=&quot;xmlHttpRequest中文问题&quot;&gt;&lt;/a&gt;xmlHttpRequest中文问题&lt;/h2&gt;&lt;p&gt;页面jsp用的GBK编码&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;%@ page contentType=&lt;span class=&quot;string&quot;&gt;&quot;text/html; charset=GBK&quot;&lt;/span&gt;%&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;javascript部分&lt;/p&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;function addFracasReport() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     var url=&quot;controler?actionId=0_06_03_01&amp;amp;actionFlag=0010&quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     var urlmsg=&quot;&amp;amp;reportId=&quot;+fracasReport1.textReportId.value;  //故障报告表编号&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     var xmlHttp=Common.createXMLHttpRequest();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     xmlHttp.onreadystatechange = Common.getReadyStateHandler(xmlHttp, eval(&quot;turnAnalyPage&quot;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     xmlHttp.open(&quot;POST&quot;,url,true);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     xmlHttp.setRequestHeader( &quot; Content-Type &quot; , &quot; application/x-www-form-urlencoded);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     xmlHttp.send(urlmsg);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;后台java中获得的reportId是乱码，不知道该怎么转，主要是不知道xmlHttp.send(urlmsg);以后是什么编码？在后面用java来转，试了几种，都没有成功，其中有：&lt;/p&gt;
&lt;p&gt;代码&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;UTF_8ToGBK&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String str)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;keyword&quot;&gt;try&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; String(str.getBytes(&lt;span class=&quot;string&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;), &lt;span class=&quot;string&quot;&gt;&quot;GBK&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;#125; &lt;span class=&quot;keyword&quot;&gt;catch&lt;/span&gt; (Exception ex) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;UTF8ToGBK&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String str)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;keyword&quot;&gt;try&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; String(str.getBytes(&lt;span class=&quot;string&quot;&gt;&quot;UTF-16BE&quot;&lt;/span&gt;), &lt;span class=&quot;string&quot;&gt;&quot;GBK&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;#125; &lt;span class=&quot;keyword&quot;&gt;catch&lt;/span&gt; (Exception ex) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;GBK&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String str)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;keyword&quot;&gt;try&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; String(str.getBytes(&lt;span class=&quot;string&quot;&gt;&quot;GBK&quot;&lt;/span&gt;),&lt;span class=&quot;string&quot;&gt;&quot;GBK&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;#125; &lt;span class=&quot;keyword&quot;&gt;catch&lt;/span&gt; (Exception ex) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;getStr&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String str)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;keyword&quot;&gt;try&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         String temp_p = str;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         String temp = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; String(temp_p.getBytes(&lt;span class=&quot;string&quot;&gt;&quot;ISO8859_1&quot;&lt;/span&gt;), &lt;span class=&quot;string&quot;&gt;&quot;GBK&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         temp = sqlStrchop(temp);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; temp;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;#125; &lt;span class=&quot;keyword&quot;&gt;catch&lt;/span&gt; (Exception e) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;有关乱码的处理－－中国程序员永远无法避免的话题&lt;/p&gt;
&lt;h2 id=&quot;常见解决办法&quot;&gt;&lt;a href=&quot;#常见解决办法&quot; class=&quot;headerlink&quot; title=&quot;常见解决办法&quot;&gt;&lt;/a&gt;常见解决办法&lt;/h2&gt;&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Notes" scheme="http://n.jourk.com/categories/Notes/"/>
    
    
      <category term="java" scheme="http://n.jourk.com/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>Hadoop-Hadoop2.4.1源码编译_个人测试整理</title>
    <link href="http://n.jourk.com/Notes/Hadoop/Hadoop-Hadoop2.4.1%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91_%E4%B8%AA%E4%BA%BA%E6%B5%8B%E8%AF%95%E6%95%B4%E7%90%86/"/>
    <id>http://n.jourk.com/Notes/Hadoop/Hadoop-Hadoop2.4.1源码编译_个人测试整理/</id>
    <published>2014-08-06T03:24:06.000Z</published>
    <updated>2016-04-23T07:04:49.490Z</updated>
    
    <content type="html">&lt;blockquote&gt;
&lt;p&gt;注明：本教程所有工具软件均安装在/usr/local/目录下,所以要把已下载的工具包Ftp传到生产环境的/usr/local/目录下,然后进入此目录操作。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;所用到的软件：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;JDK1.7&lt;/li&gt;
&lt;li&gt;Maven&lt;/li&gt;
&lt;li&gt;Findbugs&lt;/li&gt;
&lt;li&gt;Protobuf&lt;/li&gt;
&lt;li&gt;hadoop2.4.1-src&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;安装JDK&quot;&gt;&lt;a href=&quot;#安装JDK&quot; class=&quot;headerlink&quot; title=&quot;安装JDK&quot;&gt;&lt;/a&gt;安装JDK&lt;/h2&gt;&lt;p&gt;hadoop是java写的，编译hadoop必须安装&lt;code&gt;jdk&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;从oracle官网下载jdk-7u45-linux-x64.tar.gz。&lt;/p&gt;
&lt;p&gt;执行以下命令解压缩jdk&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ tar -zxvf jdk-7u45-linux-x64.tar.gz&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;会生成一个文件夹&lt;code&gt;jdk1.7.0_45&lt;/code&gt;，然后设置环境变量中。&lt;/p&gt;
&lt;p&gt;执行命令&lt;code&gt;vi/etc/profile&lt;/code&gt;，增加以下内容到配置文件中。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;export JAVA_HOME=/usr/local/jdk&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export JAVA_OPTS=&amp;quot;-Xms1024m-Xmx1024m&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export CLASSPATH=.:$JAVA_HOME/lib/tools.jar:$JAVA_HOME/lib/dt.jar:$CLASSPATH&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export PATH=$JAVA_HOME/bin:$PATH&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;保存退出文件后，执行以下命令&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;source&lt;/span&gt; /etc/profile&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;java -version&lt;/code&gt;看到显示的版本信息即正确。&lt;/p&gt;
&lt;h2 id=&quot;安装maven&quot;&gt;&lt;a href=&quot;#安装maven&quot; class=&quot;headerlink&quot; title=&quot;安装maven&quot;&gt;&lt;/a&gt;安装maven&lt;/h2&gt;&lt;p&gt;hadoop源码是使用&lt;code&gt;maven&lt;/code&gt;组织管理的，必须下载maven。从maven官网下载apache-maven-3.2.2-bin.tar.gz下载，不要选择3.1。&lt;/p&gt;
&lt;p&gt;执行以下命令解压缩&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ tar -zxvf  apache-maven-3.2.2-bin.tar.gz&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;会生成一个文件夹&lt;code&gt;apache-maven-3.2.2&lt;/code&gt;，重命名为&lt;code&gt;maven&lt;/code&gt;，然后设置环境变量中。&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ mv apache-maven-3.2.2 maven&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;执行命令&lt;code&gt;vi /etc/profile&lt;/code&gt;，编辑结果如下所示&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;export MAVEN_HOME=/usr/local/maven&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export PATH=$&amp;#123;PATH&amp;#125;:$&amp;#123;MAVEN_HOME&amp;#125;/bin&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;保存退出文件后，执行以下命令&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;source&lt;/span&gt; /etc/profile&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ mvn -version&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果看到下面的显示信息，证明配置正确了。&lt;/p&gt;
&lt;h2 id=&quot;安装findbugs（可选步骤）&quot;&gt;&lt;a href=&quot;#安装findbugs（可选步骤）&quot; class=&quot;headerlink&quot; title=&quot;安装findbugs（可选步骤）&quot;&gt;&lt;/a&gt;安装findbugs（可选步骤）&lt;/h2&gt;&lt;p&gt;&lt;code&gt;findbugs&lt;/code&gt;是用于&lt;code&gt;生成文档&lt;/code&gt;的。如果不需要编译生成文档，可以不执行该步骤。从findbugs官网下载findbugs-3.0.0-dev-20131204-e3cbbd5.tar.gz。&lt;/p&gt;
&lt;p&gt;执行以下命令解压缩&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ tar -zxvf findbugs-3.0.0-dev-20131204&lt;span class=&quot;_&quot;&gt;-e&lt;/span&gt;3cbbd5.tar.gz&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;会生成一个文件夹&lt;code&gt;findbugs-3.0.0-dev-20131204-e3cbbd5&lt;/code&gt;，重命名为&lt;code&gt;findbugs&lt;/code&gt;，然后设置环境变量中。&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ mv findbugs-3.0.0-dev-20131204&lt;span class=&quot;_&quot;&gt;-e&lt;/span&gt;3cbbd5 findbugs&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;修改配置文件改变镜像&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ vi /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/maven/conf/settings.xml&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;mirror&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;id&lt;/span&gt;&amp;gt;&lt;/span&gt;nexus-osc&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;id&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;mirrorOf&lt;/span&gt;&amp;gt;&lt;/span&gt;*&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;mirrorOf&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;Nexusosc&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;url&lt;/span&gt;&amp;gt;&lt;/span&gt;http://maven.oschina.net/content/groups/public/&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;url&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;mirror&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;执行命令&lt;code&gt;vi /etc/profile&lt;/code&gt;，编辑结果如下所示&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;export FINDBUGS_HOME=/usr/local/findbugs&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export PATH=$&amp;#123;PATH&amp;#125;:$&amp;#123;FINDBUGS_HOME&amp;#125;/bin&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;保存退出文件后，执行以下命令&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;source&lt;/span&gt; /etc/profile&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ findbugs -version&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果看到下面的显示信息，证明配置正确了。&lt;/p&gt;
&lt;h2 id=&quot;安装protoc&quot;&gt;&lt;a href=&quot;#安装protoc&quot; class=&quot;headerlink&quot; title=&quot;安装protoc&quot;&gt;&lt;/a&gt;安装protoc&lt;/h2&gt;&lt;p&gt;hadoop使用&lt;code&gt;protocol buffer&lt;/code&gt;通信，从protoc官网下载protoc，选择protobuf-2.5.0.tar.gz 下载。&lt;/p&gt;
&lt;p&gt;为了编译安装protoc，需要下载几个工具，顺序执行以下命令&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ yum install gcc &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ yum intall gcc-c++ &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ yum install make&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果操作系统是redhat6那么gcc和make已经安装了。在命令运行时，需要用户经常输入&lt;code&gt;y&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;然后执行以下命令解压缩protobuf&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ tar -zxvf protobuf-2.5.0.tar.gz&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;会生成一个文件夹&lt;code&gt;protobuf-2.5.0&lt;/code&gt;，执行以下命令&lt;code&gt;编译&lt;/code&gt;protobuf。&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; protobuf-2.5.0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ./configure --prefix=/usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/protoc/ &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ make &amp;amp;&amp;amp; make install&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;只要不出错就可以了。&lt;/p&gt;
&lt;p&gt;执行完毕后，编译后的文件位于&lt;code&gt;/usr/local/protoc/&lt;/code&gt;目录下，我们设置一下环境变量&lt;/p&gt;
&lt;p&gt;执行命令&lt;code&gt;vi /etc/profile&lt;/code&gt;，编辑结果如下所示&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;export PATH=$&amp;#123;PATH&amp;#125;:/usr/local/protoc/bin&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;保存退出文件后，执行以下命令&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;source&lt;/span&gt; /etc/profile&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ protoc --version&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果看到下面的显示信息，证明配置正确了。&lt;/p&gt;
&lt;h2 id=&quot;安装编译依赖&quot;&gt;&lt;a href=&quot;#安装编译依赖&quot; class=&quot;headerlink&quot; title=&quot;安装编译依赖&quot;&gt;&lt;/a&gt;安装编译依赖&lt;/h2&gt;&lt;p&gt;顺序执行以下命令&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ yum install cmake &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ yum install openssl-devel &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ yum install ncurses-devel&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;安装完毕即可。&lt;/p&gt;
&lt;h2 id=&quot;编译hadoop2-4-1源码&quot;&gt;&lt;a href=&quot;#编译hadoop2-4-1源码&quot; class=&quot;headerlink&quot; title=&quot;编译hadoop2.4.1源码&quot;&gt;&lt;/a&gt;编译hadoop2.4.1源码&lt;/h2&gt;&lt;p&gt;从hadoop官网下载2.4.1稳定版，下载hadoop-2.4.1-src.tar.gz。&lt;/p&gt;
&lt;p&gt;执行以下命令解压缩jdk&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ tar -zxvf hadoop-2.4.1-src.tar.gz&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;进入到目录&lt;code&gt;/usr/local/hadoop-2.4.1-src&lt;/code&gt;中，执行命令&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ mvn package -Pdist,native -DskipTests -Dtar&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果&lt;code&gt;没有安装findbugs&lt;/code&gt;，把上面命令中的&lt;code&gt;docs去掉&lt;/code&gt;即可，就不必生成文档了。&lt;/p&gt;
&lt;p&gt;该命令会从外网下载依赖的jar，编译hadoop源码，需要花费很长时间。&lt;/p&gt;
&lt;p&gt;显示sucess结果，就是编译成功了。恭喜！&lt;/p&gt;
&lt;p&gt;好了，编译完成了。&lt;/p&gt;
&lt;p&gt;编译后的代码在&lt;code&gt;hadoop-2.4.1-src/hadoop-dist/target&lt;/code&gt;下面。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;注明：本教程所有工具软件均安装在/usr/local/目录下,所以要把已下载的工具包Ftp传到生产环境的/usr/local/目录下,然后进入此目录操作。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight bas
    
    </summary>
    
      <category term="Notes" scheme="http://n.jourk.com/categories/Notes/"/>
    
    
      <category term="hadoop" scheme="http://n.jourk.com/tags/hadoop/"/>
    
  </entry>
  
  <entry>
    <title>Linux-CentOS-虚拟机克隆后网卡配置问题</title>
    <link href="http://n.jourk.com/Notes/Linux/Linux-CentOS-%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%85%8B%E9%9A%86%E5%90%8E%E7%BD%91%E5%8D%A1%E9%85%8D%E7%BD%AE%E9%97%AE%E9%A2%98/"/>
    <id>http://n.jourk.com/Notes/Linux/Linux-CentOS-虚拟机克隆后网卡配置问题/</id>
    <published>2014-07-28T03:27:06.000Z</published>
    <updated>2016-04-16T16:06:47.375Z</updated>
    
    <content type="html">&lt;blockquote&gt;
&lt;p&gt;CentOS虚拟机克隆，物理地址会冲突，于是自动新建了网卡eth1，无法启动网卡。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;解决办法&quot;&gt;&lt;a href=&quot;#解决办法&quot; class=&quot;headerlink&quot; title=&quot;解决办法&quot;&gt;&lt;/a&gt;解决办法&lt;/h2&gt;&lt;h3 id=&quot;方式1&quot;&gt;&lt;a href=&quot;#方式1&quot; class=&quot;headerlink&quot; title=&quot;方式1&quot;&gt;&lt;/a&gt;方式1&lt;/h3&gt;&lt;p&gt;1、修改&lt;code&gt;/etc/sysconfig/network-scripts/ifcfg-eth0&lt;/code&gt; 为 &lt;code&gt;/etc/sysconfig/network-scripts/ifcfg-eth1&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;2、配置&lt;code&gt;/etc/sysconfig/network-scripts/ifcfg-eth1&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# 修改为eth1 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DEVICE=&amp;quot;eth1&amp;quot; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BOOTPROTO=&amp;quot;static&amp;quot; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# 硬件地址取自eth1（通过“ifconfig -a”获取）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;HWADDR=&amp;quot;00:0C:29:91:42:2C&amp;quot; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;MTU=&amp;quot;1500&amp;quot; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NM_CONTROLLED=&amp;quot;yes&amp;quot; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ONBOOT=&amp;quot;yes&amp;quot; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;IPADDR=192.168.152.101 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NETMASK=255.255.255.0 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GATEWAY=192.168.152.2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;3、service network restart &lt;/p&gt;
&lt;h3 id=&quot;方式2&quot;&gt;&lt;a href=&quot;#方式2&quot; class=&quot;headerlink&quot; title=&quot;方式2&quot;&gt;&lt;/a&gt;方式2&lt;/h3&gt;&lt;p&gt;1、修改&lt;code&gt;/etc/udev/rules.d/70-persistent-net.rules&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;拷贝eth1的硬件地址到eth0&lt;/p&gt;
&lt;p&gt;删除eth1信息&lt;/p&gt;
&lt;p&gt;2、配置&lt;code&gt;/etc/sysconfig/network-scripts/ifcfg-eth0&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;DEVICE=&amp;quot;eth0&amp;quot; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BOOTPROTO=&amp;quot;static&amp;quot; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;HWADDR=&amp;quot;00:0C:29:91:42:2C&amp;quot; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;MTU=&amp;quot;1500&amp;quot; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NM_CONTROLLED=&amp;quot;yes&amp;quot; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ONBOOT=&amp;quot;yes&amp;quot; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;IPADDR=192.168.152.101 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NETMASK=255.255.255.0 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GATEWAY=192.168.152.2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;3、reboot&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;CentOS虚拟机克隆，物理地址会冲突，于是自动新建了网卡eth1，无法启动网卡。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;解决办法&quot;&gt;&lt;a href=&quot;#解决办法&quot; class=&quot;headerlink&quot; title=&quot;解决办法&quot;&gt;&lt;/
    
    </summary>
    
      <category term="Notes" scheme="http://n.jourk.com/categories/Notes/"/>
    
    
      <category term="linux" scheme="http://n.jourk.com/tags/linux/"/>
    
  </entry>
  
</feed>
